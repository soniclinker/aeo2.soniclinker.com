"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{6630:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(37876),r=t(14232),n=t(43598),l=t(65259),i=t(16821);let o=e=>{let{children:s,placeholder:t,value:r,setValue:n,...l}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:s,children:s}),(0,a.jsx)("input",{id:s,className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none",placeholder:t,value:r,onChange:e=>n(e.target.value)})]})},c=e=>{let{children:s}=e;return(0,a.jsx)("p",{className:"text-xs text-slate-500",children:s})},d=e=>{let{children:s,onClick:t,disabled:r}=e;return(0,a.jsx)("button",{className:"w-fit bg-indigo-700 text-white p-2 rounded-lg text-xs px-4 py-2 ml-auto cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-400",onClick:t,disabled:r,children:s})},u=e=>{let{setStepsData:s,setCurrentStep:t}=e,[u,x]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[j,g]=(0,r.useState)(""),v=n.A.current().id,b=e=>RegExp("^(https?:\\/\\/)?((([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})|localhost|\\d{1,3}(\\.\\d{1,3}){3})(\\:\\d+)?(\\/[-a-zA-Z0-9@:%_+.~#?&//=]*)?(\\?[;&a-zA-Z0-9%_+.~#?&//=]*)?(\\#[-a-zA-Z0-9_]*)?$").test(e),N=async()=>{if(!u||!b(u)){f("Please enter a website");return}f(null),m(!0);let{data:e,error:s}=await l.A.doGet({path:"/orgs/".concat(n.A.current().id,"/aeo/querygen-suggestions?website=").concat(u)});if(s){f("Something went wrong. Please try again."),m(!1);return}e&&g(e.task_id)},w=(0,r.useCallback)(async e=>{let{data:a,error:r}=await l.A.doGet({path:"/orgs/".concat(n.A.current().id,"/aeo/tasks/").concat(e)});if(r){f("Something went wrong"),m(!1);return}if(a){let e=a.task.data.suggestions;s(s=>({...s,...e,website:u})),m(!1),t(2)}},[s,t,u]);return(0,r.useEffect)(()=>{let e=i.A.getInstance(v),s=e=>{"querygen_helper_task_status"===e.type&&e.data&&e.data.task_id===j&&("completed"===e.data.status?w(j):"failed"===e.data.status&&f("Task failed"))};return e.on("message",s),()=>{e.off("message",s)}},[v,w,j]),(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-4",children:[(0,a.jsx)(o,{placeholder:"https://example.com",value:u,setValue:x,children:"Website URL"}),(0,a.jsx)(c,{children:"Enter the full URL of the website you want to track"}),p&&(0,a.jsx)("p",{className:"text-sm text-red-500 font-medium",children:p}),(0,a.jsx)(d,{onClick:N,disabled:h,children:h?"Analyzing...":"Next"})]})};var x=t(21976);let h=e=>{let{value:s,onRemove:t}=e;return(0,a.jsxs)("div",{className:"w-fit flex items-center gap-2 bg-[#EDF1FE] rounded px-3 py-1",children:[(0,a.jsx)("span",{className:"text-indigo-600 text-xs font-medium",children:s}),(0,a.jsx)(x.rhw,{className:"text-[#93A2B7] cursor-pointer",onClick:t})]})},m=e=>{let{placeholder:s,value:t,setValue:r,onAdd:n,count:l=0}=e;return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("input",{className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",placeholder:s,value:t,onChange:e=>r(e.target.value)}),(0,a.jsx)("button",{onClick:n,disabled:!t||""===t.trim()||!!(l&&l>=10),className:"bg-[#E1E7EF] rounded px-3 py-1 text-xs text-[#64748A] cursor-pointer disabled:cursor-not-allowed",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,a.jsx)(x.G7L,{className:"text-[#93A2B7] cursor-pointer"}),(0,a.jsx)("span",{children:"Add"})]})})]})},p=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:n}=e,[l,i]=(0,r.useState)(""),o=e=>{t(s=>({...s,search_queries:s.search_queries.filter((s,t)=>t!==e)}))};return(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("p",{className:"flex text-sm",children:["Analysis for \xa0",(0,a.jsx)("a",{href:s.website,className:"text-indigo-600 cursor-pointer",children:s.website})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"min-w-44",children:[(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Topics"}),(0,a.jsx)(c,{children:"You can add up to 10 topics"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.search_queries.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>o(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users search your product on Google",value:l,setValue:i,onAdd:()=>{l&&t(e=>({...e,search_queries:[...e.search_queries,l]})),i("")},count:s.search_queries.length})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>n(1),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>n(3),children:"Next"})})]})]})},f=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:n}=e,[l,i]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),f=e=>{t(s=>({...s,user_personas:s.user_personas.filter((s,t)=>t!==e)}))},j=e=>{t(s=>({...s,brand_names:s.brand_names.filter((s,t)=>t!==e)}))},g=e=>{t(s=>({...s,domains:s.domains.filter((s,t)=>t!==e)}))};return(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"User Persona"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.user_personas.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>f(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users search your product on Google",value:l,setValue:i,onAdd:()=>{l&&t(e=>({...e,user_personas:[...e.user_personas,l]})),i("")}})})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"min-w-44 max-w-44",children:[(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Your Alternative Domains Or Subdomains"}),(0,a.jsx)(c,{children:"(Do not include https;//)"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.domains.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>g(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users type your Brand Name in different ways",value:o,setValue:u,onAdd:()=>{o&&t(e=>({...e,domains:[...e.domains,o]}))}})})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Brand names & Alternatives"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.brand_names.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>j(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users type your Brand Name in different ways",value:x,setValue:p,onAdd:()=>{x&&t(e=>({...e,brand_names:[...e.brand_names,x]})),p("")}})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>n(2),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>n(4),children:"Next"})})]})]})};var j=t(49034);let g=e=>{let{placeholder:s,value:t,setValue:r}=e;return(0,a.jsx)("input",{className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",placeholder:s,value:t,onChange:e=>r(e.target.value)})};var v=t(89099),b=t(74562);let N=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:i}=e,[o,c]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[h,m]=(0,r.useState)([]),p=(0,v.useRouter)(),f=async()=>{let{data:e,error:s}=await l.A.doGet({path:"/orgs/".concat(n.A.current().id,"/aeo/workflows")});if(s){x("Error fetching workflows"),console.log(s.message);return}e&&m(e.workflows.filter(e=>"qgen"===e.type))},j=async()=>{var e;x(null);let t=s.name;if(5>Number(s.num_queries)){x("Number of queries cannot be less than 5");return}if(Number(s.num_queries)>10){x("Number of queries cannot be more than 10 in free tier");return}let a={website:s.website,keywords:(null==s?void 0:s.search_queries.join("\n"))||"",user_persona:(null==s?void 0:s.user_personas.join("\n"))||"",brand:(null==s?void 0:s.brand_names.join(", "))||"",location:(null==s?void 0:s.country_code)||"",domains:(null==s?void 0:s.domains.join(", "))||"",num_queries:(null==s?void 0:s.num_queries.toString())||""},r={name:t,data:{workflow:null===(e=h[0])||void 0===e?void 0:e.id,args:a}};c(!0);let i=await l.A.doPost({path:"/orgs/".concat(n.A.current().id,"/querysets"),data:r});if(i.error){x(i.error.message);return}if(i.data){let{id:e}=i.data;if(e){let{data:s,error:a}=await l.A.doPost({path:"/orgs/".concat(n.A.current().id,"/querysets/").concat(e),data:{action:"start_task"}});a&&x(a.message),s&&(n.A.setCurrentAeoProject({id:e,name:t,org_id:n.A.current().id}),p.push("/aeo/history"),b.A.hide())}}c(!1)};return(0,r.useEffect)(()=>{f()},[]),(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Target Customers Geography"})}),(0,a.jsx)(w,{country:s.country_code,setStepsData:t})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Number of Questions to Generate"})}),(0,a.jsx)(g,{placeholder:"Number of Questions to Generate",value:s.num_queries.toString(),setValue:e=>{t(s=>({...s,num_queries:Number(e)}))}})]}),u&&(0,a.jsx)("div",{className:"text-red-500",children:u}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>i(3),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:j,disabled:o,children:"Submit"})})]})]})},w=e=>{let{country:s,setStepsData:t}=e,n=(0,j.oj)(),[l,i]=(0,r.useState)(s);return(0,a.jsx)("select",{name:"country",id:"country",value:l,onChange:e=>{i(e.target.value),t(s=>({...s,country_code:e.target.value}))},className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",children:Object.values(n).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})},y=e=>{let{currentStep:s=1,onStepClick:t}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:Array.from({length:4},(e,t)=>(0,a.jsx)(r.Fragment,{children:(0,a.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center font-semibold transition-colors duration-700 cursor-pointer z-10 ".concat(s>=t+1?"bg-indigo-600 text-white":"bg-gray-300 text-black"),children:(0,a.jsx)("button",{className:"w-full h-full text-xs flex items-center justify-center",children:t+1})})},t))}),(0,a.jsx)("div",{className:"h-[1px] w-full transition-all duration-700 bg-gray-300 absolute top-[50%]",children:(0,a.jsx)("div",{className:"h-full transition-all duration-500 ease-in-out bg-indigo-600",style:{width:"".concat((s-1)*33.333333333333336,"%")}})})]})},_=()=>{let[e,s]=(0,r.useState)(1),[t,n]=(0,r.useState)({search_queries:[],user_personas:[],brand_names:[],country_code:"",domains:[],num_queries:0,name:"",website:""});return(0,a.jsx)("div",{className:"w-full min-h-[calc(100vh-5rem)] p-4 flex items-start justify-center bg-white",children:(0,a.jsxs)("div",{className:"lg:max-w-[60%] w-full",children:[(0,a.jsx)("div",{children:(0,a.jsx)(y,{currentStep:e,onStepClick:e=>{s(e)}})}),(0,a.jsx)("div",{children:(0,a.jsx)(k,{currentStep:e,stepsData:t,setCurrentStep:s,setStepsData:n})})]})})},k=e=>{let{stepsData:s,currentStep:t,setCurrentStep:r,setStepsData:n}=e;return(0,a.jsx)("div",{className:"w-full h-[calc(100vh-10rem)] mt-4 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"text-2xl text-center font-bold",children:"Let's get you started"}),(0,a.jsx)("p",{className:"text-sm text-[#64748A] font-medium text-center",children:"Please help us with a few answers to provide the best experience"}),1===t&&(0,a.jsx)(u,{setStepsData:n,setCurrentStep:r}),2===t&&(0,a.jsx)(p,{stepsData:s,setStepsData:n,setCurrentStep:r}),3===t&&(0,a.jsx)(f,{stepsData:s,setStepsData:n,setCurrentStep:r}),4===t&&(0,a.jsx)(N,{stepsData:s,setStepsData:n,setCurrentStep:r})]})})}},16821:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(42874),r=t(80498),n=t(3176),l=t(65259),i=t(20318);let o=()=>n.A.apiUrl+"/connect/update";class c{static getInstance(e){return(0,a._)(c,c,d)||(0,r._)(c,c,d,new c(e)),(0,a._)(c,c,d)}setOrgId(e){this.orgId=e}on(e,s){this.listener.add(s),"not_connected"===this.status&&this.connect()}off(e){this.listener.remove(e)}setupPing(){setTimeout(()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&(this.socket.send("{}"),this.setupPing())},3e4)}connect(){if("not_connected"!==this.status)return;this.changeStatus("connecting");let e=[],s=l.A.token();s&&e.push("access_token="+s),this.orgId&&e.push("org_id="+this.orgId);let t=e.length?"?"+e.join("&"):"";this.socket=new WebSocket(o()+t),this.socket.addEventListener("open",()=>{this.changeStatus("connected"),this.setupPing()}),this.socket.addEventListener("close",()=>{this.changeStatus("not_connected"),console.log("WebSocket closed")}),this.socket.addEventListener("message",e=>{try{let s=JSON.parse(e.data);this.listener.trigger(s)}catch(s){console.error("Invalid WebSocket message:",e.data)}})}send(e){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}disconnect(){if(this.socket)try{this.socket.close()}catch(e){console.error("Error closing WebSocket:",e)}}changeStatus(e){this.status!==e&&(this.status=e)}constructor(e){this.status="not_connected",this.socket=null,this.orgId=e,this.listener=new i.A}}var d={writable:!0,value:null};let u=c}}]);