(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7829],{12476:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);s(14232);let a=e=>{let{fields:t,renderRow:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"grid grid-cols-".concat(t.length," place-items-center gap-1 sm:gap-2 md:gap-3 lg:gap-4 bg-gray-100 text-gray-700 font-medium py-3 px-10 sticky top-0 z-20\n          bg-primary/50 rounded-tl rounded-tr border-l border-r border-b border-slate-200 border-t"),children:t.map((e,t)=>(0,r.jsx)("div",{className:"text-sm lg:text-base w-full h-full text-start",children:e},t))}),(0,r.jsx)("div",{children:s()})]})}},21005:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(37876),a=s(65259),n=s(82400),l=s(43598),i=s(89099),d=s(14232),o=s(49459),c=s(12476),u=s(24480),p=s(74562),m=s(88320),x=s(32675),h=s(70430);let g=()=>{let[e,t]=(0,d.useState)([]),[s,g]=(0,d.useState)(!1),[j,v]=(0,d.useState)(null),[w,N]=(0,d.useState)(!1),A=(0,i.useRouter)(),k=(0,d.useCallback)(async s=>{var r;let{loader:n}=s;0===e.length&&n&&g(!0);let{data:i,error:d}=await a.A.doGet({path:"/orgs/".concat(null===(r=l.A.current())||void 0===r?void 0:r.id,"/querysets")});if(d){v("Something went wrong"),g(!1);return}if(i){if(0===i.querysets.length){v("No question lists found"),g(!1),t([]);return}v(null),t(i.querysets),g(!1)}},[e.length]);return(0,d.useEffect)(()=>{n.A.getOrgSetupRedirectPath()&&setTimeout(()=>{p.A.show("Setup Business Profile",(0,r.jsx)(f,{}),!0)},0)},[A]),(0,d.useEffect)(()=>{k({loader:!0})},[k,w]),(0,r.jsxs)("div",{className:"bg-white p-2 lg:p-6 min-h-[calc(100vh-80px)]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5 sticky top-0",children:[(0,r.jsx)("h2",{className:"text-lg lg:text-sm justify-start textSecondary700 font-extrabold",children:"ChatGPT Visibility Analysis"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"px-4 py-2 bgMediumBlue text-white rounded cursor-pointer text-sm",onClick:()=>{p.A.show("Start Analysis",(0,r.jsx)(m.A,{setRefetchTask:N}))},children:"Analyse my brand"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-white textPrimary border border-indigo-600 rounded cursor-pointer text-sm",onClick:()=>A.push("/aeo/analysis"),children:"View Reports"})]})]}),s&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})}),!s&&j&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-red-500",children:j})}),!s&&e.length>0&&(0,r.jsx)("div",{className:"flex items-center justify-start mb-4",children:(0,r.jsx)("span",{className:"text-gray-700",children:"Question Sets"})}),!s&&e.length>0&&(0,r.jsx)(c.A,{fields:["Name","Updated At","Actions"],renderRow:()=>e.map(e=>(0,r.jsxs)(u.A,{columns:3,onClick:()=>{A.push("/aeo/manage/?id=".concat(e.id))},children:[(0,r.jsx)("div",{className:"capitalize text-sm lg:text-base w-full h-full text-start pl-4",children:e.name}),(0,r.jsx)("div",{className:"text-red-600 w-full h-full text-start pl-4",title:e.created_at.toString(),children:(0,r.jsx)("span",{className:"inline-block text-blue-500",children:new Date(Number(e.updated_at)).toLocaleString()})}),(0,r.jsx)("div",{className:"pl-4",children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{label:"Questions",action:t=>{t.stopPropagation(),A.push("/aeo/manage/?id=".concat(e.id))}}),(0,r.jsx)(x.A,{label:"Reports",action:t=>{t.stopPropagation(),A.push("/aeo/analysis/?id=".concat(e.id))}}),(0,r.jsx)(x.A,{label:"Rename",action:t=>{t.stopPropagation(),p.A.show("Rename Query Set",(0,r.jsx)(y,{id:e.id,name:e.name,setRefetchTask:N}))}}),(0,r.jsx)(x.A,{label:"Delete",action:t=>{t.stopPropagation(),p.A.show("Delete Query Set",(0,r.jsx)(b,{id:e.id,setRefetchTask:N}))}}),(0,r.jsx)(x.A,{label:"Edit Business Profile",action:t=>{t.stopPropagation(),p.A.show("Edit Business Profile",(0,r.jsx)(h.A,{id:e.id,args:e.data.args,setRefetchQuery:N}))}})]})})]},e.id))})]})},b=e=>{let{id:t,setRefetchTask:s}=e,[n,i]=(0,d.useState)(!1),[o,c]=(0,d.useState)(null),u=async()=>{c(null),i(!0);let e=await a.A.doDelete({path:"/orgs/".concat(l.A.current().id,"/querysets/").concat(t)});if(e.error){c(e.error.message),i(!1);return}i(!1),p.A.hide(),s(e=>!e)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)("span",{children:"Are you sure you want to delete this query set?"})}),o&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:o})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>p.A.hide(),children:"Cancel"}),(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-red-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:u,disabled:n,children:"Delete"})]})]})},y=e=>{let{id:t,name:s,setRefetchTask:n}=e,[i,o]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null),[m,x]=(0,d.useState)(s),h=async e=>{if(e.preventDefault(),!m)return;o(!0),u(null);let s=await a.A.doPost({path:"/orgs/".concat(l.A.current().id,"/querysets/").concat(t),data:{name:m}});if(s.error){u(s.error.message),o(!1);return}o(!1),p.A.hide(),n(e=>!e)};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"flex items-center justify-start",htmlFor:"name",title:"Enter new name",children:(0,r.jsx)("span",{children:"Enter new name"})}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:m,onChange:e=>x(e.target.value)})]}),c&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:c})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>p.A.hide(),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bgMediumBlue text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:i,children:"Update"})]})]})})},f=()=>{let[e,t]=(0,d.useState)(""),[s,i]=(0,d.useState)(!1),[o,c]=(0,d.useState)(null),u=async s=>{var r;if(s.preventDefault(),!(null==e?void 0:e.trim())){c("Please enter a valid organization name"),t("");return}i(!0);let d=l.A.current()?"/orgs/".concat(null===(r=l.A.current())||void 0===r?void 0:r.id):"/orgs/setup";try{let t=await a.A.doPost({path:d,data:{name:e}});if(t.error){c(t.error.message);return}await n.A.fetchCurrentUser();let s=l.A.current();s.name=e,l.A.setCurrent(s),p.A.hide(),window.location.reload()}catch(e){console.error("Error creating organization:",e),c("Unable to create organization")}finally{i(!1)}};return(0,r.jsxs)("form",{onSubmit:u,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"flex items-center justify-start",htmlFor:"orgName",children:(0,r.jsx)("span",{children:"Enter orgnaization name"})}),(0,r.jsx)("input",{type:"text",id:"orgName",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:e,onChange:e=>t(e.target.value)})]}),o&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:o})}),(0,r.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:(0,r.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bgMediumBlue text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s,children:"Update"})})]})}},24480:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);let a=e=>{let{children:t,columns:s,...a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-".concat(s," gap-2 sm:gap-3 md:gap-3 lg-gap-5 place-items-start py-4 px-5 border-b border-l border-r border-gray-100 hover:bg-gray-50"),...a,children:t})}},32675:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);s(14232);let a=e=>{let{label:t,action:s}=e;return(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded cursor-pointer block w-full text-left",onClick:s,children:t})}},49459:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(37876),a=s(14232),n=s(26478);let l=e=>{let{children:t}=e,[s,l]=(0,a.useState)(!1),i=(0,a.useRef)(null),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!s)return;let e=i.current,t=d.current;e&&t&&requestAnimationFrame(()=>{let s=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a={top:s.top,bottom:window.innerHeight-s.bottom,left:s.left,right:window.innerWidth-s.right};Object.assign(t.style,{top:"",bottom:"",left:"",right:""}),a.right>=r.width?(t.style.left="120%",t.style.top="0"):a.left>=r.width&&(t.style.right="120%",t.style.top="0"),a.bottom<=r.height&&(t.style.top="-".concat(r.height-s.height,"px"))})},[s]);let o=a.Children.map(t,e=>a.isValidElement(e)?a.cloneElement(e,{onClick:t=>{"onClick"in e.props&&"function"==typeof e.props.onClick&&e.props.onClick(t),l(!1)}}):e);return(0,a.useEffect)(()=>{let e=e=>{var t,s;(null===(t=i.current)||void 0===t?void 0:t.contains(e.target))||(null===(s=d.current)||void 0===s?void 0:s.contains(e.target))||l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:"inline-block z-10",children:[(0,r.jsx)("button",{ref:i,onClick:e=>{e.stopPropagation(),l(e=>!e)},className:"p-2 rounded bg-gray-100 cursor-pointer",children:(0,r.jsx)(n.Ym0,{})}),s&&(0,r.jsx)("div",{ref:d,className:"absolute min-w-[150px] p-1 bg-white shadow-[0_0_5px_rgba(0,0,0,0.2)] rounded-lg z-50 transition-all",children:o})]})})}},53949:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo",function(){return s(21005)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[2517,9034,7525,636,6593,8792],()=>t(53949)),_N_E=e.O()}]);