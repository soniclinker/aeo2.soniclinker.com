(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7611],{31906:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(37876),i=s(59884),a=s(45982),l=s(95313),c=s(14232),n=s(65259),d=s(43598),o=s(91589);let x=()=>{let[e,t]=(0,c.useState)({}),[s,x]=(0,c.useState)(""),[u,p]=(0,c.useState)("error"),[h,f]=(0,c.useState)(!1),[y,m]=(0,c.useState)(!1),[j,v]=(0,c.useState)(!0),b=d.A.current().id,w=(0,c.useCallback)(async()=>{let{data:e,error:s}=await n.A.doGet({path:"orgs/".concat(b,"/api-keys")});if(s){x(s.message),p("error"),v(!1);return}e&&(t(e.api_keys[0]),v(!1))},[b]),g=async()=>{let{data:e,error:t}=await n.A.doPost({path:"orgs/".concat(b,"/api-keys")});if(t){x(t.message),p("error"),v(!1);return}v(!1),await w()},k=async()=>{let{data:s,error:r}=await n.A.doDelete({path:"orgs/".concat(b,"/api-keys/").concat(encodeURIComponent(e.id))});if(r){x(r.message),p("error"),v(!1);return}m(!1),t({}),x(""),v(!1),await w()};(0,c.useEffect)(()=>{w()},[w]),(0,c.useEffect)(()=>{f(!1)},[y]);let N=async(e,t)=>{try{await navigator.clipboard.writeText(e),p("success"),x("".concat(t," copied to clipboard")),f(!0)}catch(e){console.error("Failed to copy text: ",e),p("error"),x("Failed to copy to clipboard"),f(!0)}};return(0,r.jsxs)("div",{children:[!j&&(0,r.jsxs)("div",{children:[!y&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"m-auto absolute",children:h&&(0,r.jsx)(o.A,{type:u,message:s,onClose:()=>f(!1),autoCloseDelay:2e3})}),s&&"error"===u&&(0,r.jsx)("div",{className:"w-full flex justify-center mt-10 text-red-400",children:(0,r.jsx)("div",{children:s})}),(null==e?void 0:e.id)&&(0,r.jsxs)("div",{className:"py-8 px-2 flex items-end justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col w-3/4",children:[(0,r.jsx)("div",{children:"API Key:"}),(0,r.jsx)("div",{className:"overflow-hidden break-all",children:e.id})]}),(0,r.jsx)("div",{className:"cursor-pointer",onClick:()=>{N(e.id,"Api Key")},children:(0,r.jsx)(i.zU_,{className:"text-blue-400 mb-2"})}),(0,r.jsx)("div",{onClick:()=>m(!0),children:(0,r.jsx)(a.A,{size:20,className:"cursor-pointer text-red-400 mb-2"})})]}),!(null==e?void 0:e.id)&&!s&&(0,r.jsx)("div",{className:"w-full flex justify-center items-center pt-10",children:(0,r.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-2 bg-[#4F46E4] rounded text-white cursor-pointer",onClick:g,children:"Add API Key"})})]}),y&&(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("div",{children:"Are you sure you want to delete the API key?"}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-1 bg-gray-500 rounded text-white cursor-pointer",onClick:()=>m(!1),children:"Cancle"})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-1 bg-red-400 rounded text-white cursor-pointer",onClick:k,children:"Delete"})})]})]})]}),j&&(0,r.jsx)("div",{className:"flex justify-center mt-6 h-[40px]",children:(0,r.jsx)(l.A,{className:"animate-spin"})})]})}},45982:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(95551).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},52700:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/traffic-log/apiKeys",function(){return s(31906)}])},91589:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(37876),i=s(14232),a=s(75683);let l={success:"bg-green-100 text-green-800 border-green-300",info:"bg-blue-100 text-blue-800 border-blue-300",error:"bg-red-100 text-red-800 border-red-300"},c=e=>{let{type:t,message:s,className:c="",onClose:n,autoCloseDelay:d=1e3}=e;return(0,i.useEffect)(()=>{if(n){let e=setTimeout(()=>{n()},d);return()=>clearTimeout(e)}},[n,d]),(0,r.jsx)("div",{className:"fixed top-4 left-0 right-0 flex justify-center z-[9999] pointer-events-none",children:(0,r.jsxs)("div",{className:"border rounded px-4 py-3 ".concat(l[t]," ").concat(c," \n                pointer-events-auto w-fit flex justify-between items-center \n                shadow-lg animate-slide-down"),role:"alert",children:[(0,r.jsx)("span",{children:s}),n&&(0,r.jsx)("button",{onClick:n,className:"ml-4 hover:opacity-70 transition-opacity","aria-label":"Close",children:(0,r.jsx)(a.WQq,{size:20})})]})})}},95313:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(95551).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,4938,636,6593,8792],()=>t(52700)),_N_E=e.O()}]);