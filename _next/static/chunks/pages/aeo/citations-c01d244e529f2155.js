(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7138],{10377:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/citations",function(){return s(73795)}])},20477:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(37876),l=s(68951),a=s.n(l),i=s(46104);s(14232);let n=e=>{let{isOpen:t,onClose:s,title:l,children:n}=e;return t?(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da fixed inset-0 z-50 flex",children:[(0,r.jsx)("div",{onClick:s,className:"jsx-593ab1484ff139da fixed inset-0 bg-black/20 transition-opacity"}),(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da ml-auto w-full md:w-1/2 h-full bg-white shadow-xl p-6 relative animate-slide-in-right overflow-y-auto",children:[(0,r.jsx)("button",{onClick:s,"aria-label":"Close",className:"jsx-593ab1484ff139da absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700",children:(0,r.jsx)(i.A,{className:"cursor-pointer",size:20})}),n]}),(0,r.jsx)(a(),{id:"593ab1484ff139da",children:"@-webkit-keyframes slide-in-right{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slide-in-right{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slide-in-right{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slide-in-right{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-slide-in-right{-webkit-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-moz-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-o-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);animation:slide-in-right.3s cubic-bezier(.4,0,.2,1)}"})]}):null}},32722:(e,t,s)=>{"use strict";function r(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}s.d(t,{_:()=>r})},35712:(e,t,s)=>{"use strict";function r(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}s.d(t,{_:()=>r})},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),a=s(89099),i=s(43598);let n=()=>{let e=(0,a.useRouter)(),t=e.asPath,[s,n]=(0,l.useState)(""),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?s:e),d=o.map((s,l)=>{let a=l===o.length-1;return(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(a)return;let s="/".concat(o.slice(0,l+1).join("/"));s!==t&&s!=="/".concat(o[0])&&e.push(s)},children:s.replace(/-/g," ")}),!a&&(0,r.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},l)});return(0,l.useEffect)(()=>{(async()=>{let e=await i.A.currentAeoProject();e&&n(e.name)})()},[]),(0,r.jsx)("div",{children:d})},o=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,r.jsx)(n,{}),t&&(0,r.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42874:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var r=s(32722),l=s(35712);function a(e,t,s){return(0,r._)(e,t),(0,l._)(s,"get"),s.get?s.get.call(e):s.value}},73795:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(37876),l=s(14232),a=s(7972),i=s(9614),n=s(89099),o=s(65259),d=s(43598),c=s(20477);let x=e=>{let{domain:t,data:s,urlToQueryCount:l,domainCitedCount:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-indigo-600 text-base font-bold mb-9",children:["Domain: ",t]}),(0,r.jsxs)("div",{className:"hidden md:grid grid-cols-4 gap-0 bg-neutral-100/50 border-b-[0.80px] border-neutral-200 text-neutral-500 text-xs font-semibold ",children:[(0,r.jsx)("div",{className:"px-2 py-2",children:"Webpage URL"}),(0,r.jsx)("div",{className:"px-2 py-2",children:"Topics"}),(0,r.jsx)("div",{className:"px-2 py-2",children:"Cited"}),(0,r.jsx)("div",{className:"px-2 py-2",children:"Questions"})]}),s.map((e,t)=>{var s,i;return(0,r.jsxs)("div",{className:"hidden md:grid grid-cols-4 gap-0 border-b-[0.80px] border-neutral-200 text-xs items-center",children:[(0,r.jsx)("div",{className:"px-2 py-2 text-blue-700 underline cursor-pointer break-all",children:e.url}),(0,r.jsx)("div",{className:"px-2 py-2",children:e.topic||"-"}),(0,r.jsx)("div",{className:"px-2 py-2",children:null!=a?a:"-"}),(0,r.jsx)("div",{className:"px-2 py-2",children:l?null!==(s=l[e.url])&&void 0!==s?s:"-":null!==(i=e.cited)&&void 0!==i?i:"-"})]},e.url+t)}),(0,r.jsx)("div",{className:"block md:hidden",children:s.map((e,t)=>{var s,i;return(0,r.jsx)("div",{className:" rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white",children:(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between min-w-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Web Url:"}),(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-semibold break-all",children:e.url})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Topic:"}),(0,r.jsx)("span",{className:"bg-gray-200 text-gray-700 text-xs font-medium px-2 py-0.5 rounded",children:e.topic||"Others"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end justify-between text-sm text-gray-500 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-right",children:["Cited: ",(0,r.jsx)("span",{className:"font-bold text-black text-lg",children:null!=a?a:"-"})]}),(0,r.jsxs)("div",{className:"text-right",children:["Questions: ",(0,r.jsx)("span",{className:"font-bold text-black text-lg",children:l?null!==(s=l[e.url])&&void 0!==s?s:"-":null!==(i=e.cited)&&void 0!==i?i:"-"})]})]})]})},e.url+t+"-card")})})]})};var u=s(42059),m=s(74562),h=s(6630),f=s(94344),p=s(98188);let b=()=>{var e,t,s,b,v,g,j,y,N,w,k,_,E;let C=(0,n.useRouter)().query.runId,[z,A]=(0,l.useState)([]),[S,q]=(0,l.useState)(null),[P,T]=(0,l.useState)(null),[M,D]=(0,l.useState)(!1),[F,R]=(0,l.useState)(null),[L,B]=(0,l.useState)(!1),[O,Q]=(0,l.useState)(null),[W,G]=(0,l.useState)(!1),I=(0,l.useRef)(null),V=(0,l.useRef)(null);(0,f.A)([I,V],()=>B(!1));let H=((null==P?void 0:null===(t=P.result)||void 0===t?void 0:null===(e=t.all)||void 0===e?void 0:e.domains)||[]).map(e=>({domain:e.name,frequency:e.num_urls,source:e.type||"-",viewMore:"#"})),[U,X]=(0,l.useState)(1),[K,J]=(0,l.useState)(10),Y=Math.ceil(H.length/K),Z=H.slice((U-1)*K,U*K);(0,l.useEffect)(()=>{U>Y&&X(1)},[H,Y,U]),(0,l.useEffect)(()=>{(async()=>{D(!0),R(null);let e=await d.A.checkAndGetAeoProject();if(!e)return R("Project not found"),D(!1),m.A.show("Create new project",(0,r.jsx)(h.default,{}),!0,"90%");let{data:t,error:s}=await o.A.doGet({path:"/orgs/".concat(d.A.current().id,"/aeoanalysis/tasks?queryset_id=").concat(e.id)});if(s){R("Failed to fetch runs"),D(!1);return}if(A(t.tasks||[]),C&&t.tasks){let e=t.tasks.find(e=>e.id===C);e?q(e):t.tasks.length>0&&q(t.tasks[0])}else t.tasks&&t.tasks.length>0&&q(t.tasks[0]);D(!1)})()},[C]);let $=e=>{q(e),B(!1)};(0,l.useEffect)(()=>{let e=async()=>{if(!S)return;D(!0),R(null);let{data:e,error:t}=await o.A.doGet({path:"/orgs/".concat(d.A.current().id,"/aeoanalysis/tasks/").concat(S.id,"?fetch_result=true")});if(t){R("Failed to fetch analysis data"),D(!1);return}T(e.task),D(!1)};S&&e()},[S]);let ee=(null==S?void 0:S.name)||(null==S?void 0:null===(s=S.data)||void 0===s?void 0:s.queryset_name)||(null==S?void 0:S.id)||"-",et=S?new Date(Number(S.created_at)).toLocaleString():"-",es=null!==(k=null==P?void 0:null===(g=P.result)||void 0===g?void 0:null===(v=g.all)||void 0===v?void 0:null===(b=v.queries)||void 0===b?void 0:b.length)&&void 0!==k?k:"-",er=[];O&&P&&(er=((null===(E=P.result)||void 0===E?void 0:null===(_=E.all)||void 0===_?void 0:_.urls)||[]).filter(e=>e.link&&e.link.includes(O||"")).map(e=>({url:e.link,topic:e.type||"-",cited:e.cited,questions:e.questions,sov:e.sov})));let el={};(null==P?void 0:null===(y=P.result)||void 0===y?void 0:null===(j=y.all)||void 0===j?void 0:j.queries)&&P.result.all.queries.forEach(e=>{e.urls.forEach(e=>{e.includes(O||"")&&(el[e]=(el[e]||0)+1)})});let ea=0;return O&&(null==P?void 0:null===(w=P.result)||void 0===w?void 0:null===(N=w.all)||void 0===N?void 0:N.queries)&&P.result.all.queries.forEach(e=>{e.urls.forEach(e=>{e.includes(O)&&ea++})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col bg-white",children:[(0,r.jsx)("div",{className:"sticky top-0 z-30 bg-white",children:(0,r.jsx)(u.A,{})}),(0,r.jsx)("div",{className:"px-6 py-4 sticky top-[57px] z-20 bg-violet-50 flex flex-col md:flex-row md:items-center md:justify-between mb-2 md:mb-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[#6C47FF] text-base font-medium relative",children:[(0,r.jsx)("span",{className:"text-slate-600 text-xs font-semibold pr-2",children:"Select Run :"}),(0,r.jsxs)("span",{ref:I,className:"text-slate-500 text-xs font-semibold ml-2 flex items-center gap-1 cursor-pointer select-none relative",onClick:()=>B(e=>!e),children:[ee,(0,r.jsx)(a.fK4,{size:16}),L&&(0,r.jsx)("div",{ref:V,className:"absolute left-0 top-6 z-10 bg-white border border-gray-200 rounded shadow w-48 max-h-56 overflow-y-auto",children:z.map(e=>{var t;return(0,r.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat((null==S?void 0:S.id)===e.id?"bg-gray-100 font-bold":""),onClick:()=>$(e),children:[(0,r.jsx)("div",{className:"font-medium",children:e.name||(null===(t=e.data)||void 0===t?void 0:t.queryset_name)||e.id}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:new Date(Number(e.created_at)).toLocaleString()})]},e.id)})})]}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-semibold ml-2 pr-2",children:et}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold ml-1",children:[es," Questions"]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"bg-white min-h-screen fontDmSans",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"hidden md:grid w-full grid-cols-4 gap-0 px-6 py-3 border-b border-neutral-200 text-neutral-500 text-xs bg-neutral-100/50 font-semibold",children:[(0,r.jsx)("div",{className:"",children:"Top Domains"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["Frequency ",(0,r.jsx)("span",{className:"text-gray-400",children:(0,r.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["Source ",(0,r.jsx)("span",{className:"text-gray-400",children:(0,r.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,r.jsx)("div",{className:"",children:"View More"})]}),(0,r.jsx)("div",{className:"hidden md:grid w-full text-xs grid-cols-4",children:Z.map((e,t)=>[(0,r.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-900 text-xs font-medium px-6 md:px-6 py-3",children:e.domain},e.domain+t+"-domain"),(0,r.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-950 text-xs font-normal py-3",children:e.frequency},e.domain+t+"-freq"),(0,r.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-700 text-xs font-normal py-3",children:e.source},e.domain+t+"-source"),(0,r.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white text-sm items-center py-3",children:(0,r.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>{Q(e.domain),G(!0)},children:"View More"})},e.domain+t+"-view")])}),(0,r.jsx)("div",{className:"block md:hidden",children:Z.map((e,t)=>(0,r.jsx)("div",{className:"mx-4 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm",children:(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between min-w-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500 text-xs",children:"Top Domain :"}),(0,r.jsx)("div",{className:"text-black font-bold text-base break-words",children:e.domain})]}),(0,r.jsxs)("div",{className:"text-gray-500 text-xs mt-2",children:["Frequency: ",e.frequency]})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-gray-500 flex flex-col items-end text-xs",children:["Sources:",(0,r.jsx)("span",{className:"mt-1 bg-gray-200 text-gray-600 text-xs font-medium px-2 py-0.5 rounded",children:e.source})]}),(0,r.jsx)("button",{className:"text-blue-600 hover:underline text-sm font-medium mt-2",onClick:()=>{Q(e.domain),G(!0)},children:"View More"})]})]})},e.domain+t+"-card"))})]}),(0,r.jsx)(p.A,{currentPage:U,setCurrentPage:X,totalItems:H.length,itemsPerPage:K,setItemsPerPage:J}),(0,r.jsx)(c.A,{isOpen:W,onClose:()=>G(!1),title:O?"Domain: ".concat(O):"",children:(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"md:min-w-[600px] w-full text-xs",children:(0,r.jsx)(x,{domain:O||"",data:er,urlToQueryCount:el,domainCitedCount:ea})})})})]})})]})})}},80498:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var r=s(32722),l=s(35712);function a(e,t,s,a){return(0,r._)(e,t),(0,l._)(s,"set"),!function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=s}}(e,s,a),a}},94344:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(14232);let l=(e,t)=>{(0,r.useEffect)(()=>{let s=s=>{!e.some(e=>e.current&&e.current.contains(s.target))&&t(s)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[e,t])}},98188:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),a=s(6246),i=s(28067),n=s(48963);let o=e=>{let{currentPage:t,setCurrentPage:s,totalItems:o,itemsPerPage:d,setItemsPerPage:c,hidePageNumbers:x=!1}=e,[u,m]=(0,l.useState)(!1),h=Math.ceil(o/d);if(o<=1)return null;let f=e=>{e>=1&&e<=h&&s(e)},p=e=>{c(e),s(1),m(!1)};return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,r.jsxs)("span",{children:["Page ",t," of ",h]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>f(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(a.A,{size:16})}),!x&&(0,r.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(h<=5)for(let s=1;s<=h;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,r.jsx)("button",{onClick:()=>f(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,h-1);s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=h-2){h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(h-3,2);s<=h-1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}h>1&&e.push((0,r.jsx)("button",{onClick:()=>f(h),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===h?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:h},h))}return e})()}),(0,r.jsx)("button",{onClick:()=>f(t+1),disabled:t===h,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===h?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(i.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,r.jsxs)("span",{className:"mr-2",children:[d," per page"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>m(!u),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,r.jsx)(n.A,{size:16})}),u&&(0,r.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,r.jsxs)("button",{onClick:()=>p(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(d===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),u&&(0,r.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>m(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,9526,4249,636,6593,8792],()=>t(10377)),_N_E=e.O()}]);