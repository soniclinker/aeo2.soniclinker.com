(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8672],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6246:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95551).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7492:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var a=s(37876);s(14232);var r=s(69241),n=s(95313);let i={default:"bg-gray-500 hover:bg-gray-600 text-white",white:"bg-white hover:bg-gray-100 text-indigo-700 border border-indigo-700",primary:"bgHardBlue hover:bgHardBlue text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},l=e=>{let{variant:t="default",loading:s=!1,children:l,className:c,loaderIcon:o,...d}=e;return(0,a.jsx)("button",{className:(0,r.A)(" text-xs font-semibold px-4 py-2 rounded-lg transition cursor-pointer flex items-center justify-center gap-2",i[t],c),disabled:s||d.disabled,...d,children:s?o||(0,a.jsx)(n.A,{className:"h-4 w-4 animate-spin"}):l})}},28067:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95551).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},31984:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(37876),r=s(42059),n=s(74562),i=s(7492),l=s(65259),c=s(43598),o=s(16821),d=s(83350),u=s(89099),x=s(14232),m=s(38412);s(16691),s(58198);var h=s(7972),g=s(9614),f=s(6630),p=s(98188);let b={running:"bg-blue-100 text-blue-600",completed:"bg-green-100 text-green-600",failed:"bg-red-100 text-red-500"},j=new Date,y=new Date(j);y.setDate(j.getDate()-7),y.setHours(0,0,0,0);let v=new Date(j);v.setHours(23,59,59,999);let N={startDate:y.getTime(),endDate:v.getTime(),key:"selection"},w=()=>{let e=sessionStorage.getItem("date_range");if(!e)return null;let t=JSON.parse(e),s=new Date(t.startDate),a=new Date(t.endDate),r=new Date;return a.getFullYear()===r.getFullYear()&&a.getMonth()===r.getMonth()&&a.getDate()===r.getDate()&&(a=r),{startDate:s.getTime(),endDate:a.getTime(),key:t.key||"selection"}},k=()=>{let e=(0,u.useRouter)(),[t,s]=(0,x.useState)([]),[j,y]=(0,x.useState)(!1),[v,k]=(0,x.useState)(null),[D,_]=(0,x.useState)(N),[C,A]=(0,x.useState)(!1),S="".concat((0,d.GP)(D.startDate,"MMM dd, yyyy")," â€“ ").concat((0,d.GP)(D.endDate,"MMM dd, yyyy")),P=(0,x.useRef)(null),[T,E]=(0,x.useState)(""),[z,I]=(0,x.useState)(null),[O,M]=(0,x.useState)(1),[q,H]=(0,x.useState)(10),R=Math.ceil(t.length/q),L=t.slice((O-1)*q,O*q),F=()=>{sessionStorage.removeItem("date_range"),_(N)},V=async e=>{var t;let a="/orgs/".concat(null===(t=c.A.current())||void 0===t?void 0:t.id,"/aeoanalysis/tasks?queryset_id=").concat(e);D.startDate&&D.endDate&&(a+="&start_date=".concat(D.startDate,"&end_date=").concat(D.endDate));let{data:r,error:n}=await l.A.doGet({path:a});if(n){k("Failed to fetch runs"),s([]),y(!1);return}return s(r.tasks||[]),r.tasks.length},G=e=>{let t=e.startDate?new Date(e.startDate):new Date;t.setHours(0,0,0,0);let s=e.endDate?new Date(e.endDate):new Date;return s.setHours(23,59,59,999),{startDate:t.getTime(),endDate:s.getTime(),key:"selection"}};return(0,x.useEffect)(()=>{T&&V(T)},[D,T]),(0,x.useEffect)(()=>{let e;y(!0);let t=o.A.getInstance(c.A.current().id);return(async()=>{let e=await c.A.checkAndGetAeoProject();return e||(k("Project not found"),y(!1),n.A.show("Create new project",(0,a.jsx)(f.default,{}),!0,"90%"))})().then(s=>{E(s.id),I(s);let a=w();a&&_(a),y(!1),e=e=>{"analysis_task_status"===e.type&&V(s.id)},t.on("message",e)}),()=>{t.off("message",e)}},[]),(0,x.useEffect)(()=>{O>R&&M(1)},[R,O]),(0,x.useEffect)(()=>{if(C)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){P.current&&!P.current.contains(e.target)&&A(!1)}},[C]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col bg-white",children:[(0,a.jsx)("div",{className:"sticky top-0 z-30 bg-white",children:(0,a.jsxs)(r.A,{children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(i.$,{variant:"primary",className:"hover:bg-[#5a3fd6] transition-all",onClick:async()=>{let{id:t}=await c.A.checkAndGetAeoProject();t&&e.push({pathname:"/aeo/manage",query:{id:t}})},children:"Create New Run"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 text-xs bg-white",onClick:()=>A(e=>!e),children:[(0,a.jsx)("span",{className:"mr-2",children:S}),(0,a.jsx)(h.fK4,{className:"text-base"})]}),(0,a.jsx)(i.$,{variant:"white",onClick:()=>F(),children:"Clear"})]}),C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>A(!1),style:{background:"transparent"}}),(0,a.jsx)("div",{className:"absolute right-0 z-20 bg-white shadow-lg mt-2",children:(0,a.jsx)(m.ad,{editableDateInputs:!0,onChange:e=>{let t=G(e.selection);_(t),sessionStorage.setItem("date_range",JSON.stringify(t))},ranges:[{...D,startDate:new Date(D.startDate),endDate:new Date(D.endDate)}],maxDate:new Date})})]})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto bg-white min-h-screen fontDmSans",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"hidden md:grid min-w-[700px] w-full grid-cols-5 gap-0 px-6 py-3 rounded-t-lg border-b border-neutral-200 text-neutral-500 text-xs font-medium ",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["SOV"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(g.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Start Time"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(g.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Questions"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(g.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Status"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(g.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["More"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(g.H2l,{size:16,className:"text-neutral-500"})})]})]}),j&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})}),!j&&v&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("span",{className:"text-red-500",children:v})}),!j&&!v&&0===t.length&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No runs found for this question set."})}),!j&&!v&&L.map(t=>{let s=t.data&&"object"==typeof t.data&&"result"in t.data?t.data.result:void 0,r=s&&void 0!==s.sov?"".concat(Number(s.sov).toFixed(2),"%"):"--",n=s&&void 0!==s.num_questions?"".concat(s.num_questions):"--",i=t.status?t.status.toLowerCase():"unknown";return(0,a.jsxs)("div",{className:"hidden md:grid min-w-[700px] w-full grid-cols-5 gap-0 px-6 py-3 border-b border-[#E5E7EB] items-center justify-center text-sm",children:[(0,a.jsx)("div",{className:"text-neutral-900 text-xs font-medium",children:r}),(0,a.jsx)("div",{className:"text-black text-xs font-normal",children:new Date(Number(t.created_at)).toLocaleString()}),(0,a.jsx)("div",{className:"text-neutral-950 text-xs font-normal flex items-center",children:n}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs capitalize font-semibold ".concat(b[i]||""),children:t.status})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>e.push("/aeo/history/questions?runId=".concat(t.id)),children:"View Questions"}),(0,a.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>e.push("/aeo/citations?runId=".concat(t.id)),children:"View Citations"})]})]},t.id)}),(0,a.jsx)("div",{className:"block md:hidden",children:L.map(t=>{let s=t.data&&"object"==typeof t.data&&"result"in t.data?t.data.result:void 0,r=s&&void 0!==s.sov?"".concat(Number(s.sov).toFixed(2),"%"):"--",n=s&&void 0!==s.num_questions?"".concat(s.num_questions):"--",i=t.status?t.status.toLowerCase():"unknown";return(0,a.jsx)("div",{className:"mx-1 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm",children:(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between min-w-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"SOV:"}),(0,a.jsx)("div",{className:"text-black font-bold text-base",children:r})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-xs mt-2 break-words flex flex-col",children:["Start Time:"," ",(0,a.jsx)("span",{className:" mt-1 font-medium text-neutral-900",children:new Date(Number(t.created_at)).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,a.jsxs)("div",{className:"text-gray-500 flex flex-col items-end text-xs",children:["Questions: ",n,(0,a.jsx)("span",{className:"mt-1 px-2 py-0.5 rounded-full text-xs font-semibold ".concat(b[i]||""),children:t.status})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1 mt-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:underline text-sm font-medium",onClick:()=>e.push("/aeo/history/questions?runId=".concat(t.id)),children:"View Questions"}),(0,a.jsx)("button",{className:"text-blue-600 hover:underline text-sm font-medium",onClick:()=>e.push("/aeo/citations?runId=".concat(t.id)),children:"View Citations"})]})]})]})},t.id+"-card")})})]}),(0,a.jsx)(p.A,{currentPage:O,setCurrentPage:M,totalItems:t.length,itemsPerPage:q,setItemsPerPage:H})]})]})})}},36909:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/history",function(){return s(31984)}])},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(37876);s(14232);var r=s(89099);let n=()=>{let e=(0,r.useRouter)(),t=e.asPath,s=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),n=s.map((r,n)=>{let i=n===s.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a="/".concat(s.slice(0,n+1).join("/"));a!==t&&a!=="/".concat(s[0])&&e.push(a)},children:r.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},n)});return(0,a.jsx)("div",{children:n})},i=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,a.jsx)(n,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},48963:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95551).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},69241:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}},79706:(e,t,s)=>{"use strict";var a=s(3717);function r(){}function n(){}n.resetWarningCache=r,e.exports=function(){function e(e,t,s,r,n,i){if(i!==a){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:r};return s.PropTypes=s,s}},95062:(e,t,s)=>{e.exports=s(79706)()},98188:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(37876),r=s(14232),n=s(6246),i=s(28067),l=s(48963);let c=e=>{let{currentPage:t,setCurrentPage:s,totalItems:c,itemsPerPage:o,setItemsPerPage:d}=e,[u,x]=(0,r.useState)(!1),m=Math.ceil(c/o);if(c<=1)return null;let h=e=>{e>=1&&e<=m&&s(e)},g=e=>{d(e),s(1),x(!1)};return(0,a.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,a.jsxs)("span",{children:["Page ",t," of ",m]})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>h(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,a.jsx)(n.A,{size:16})}),(0,a.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(m<=5)for(let s=1;s<=m;s++)e.push((0,a.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,a.jsx)("button",{onClick:()=>h(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,m-1);s++)e.push((0,a.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));m>5&&e.push((0,a.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=m-2){m>5&&e.push((0,a.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(m-3,2);s<=m-1;s++)e.push((0,a.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,a.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,a.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,a.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}m>1&&e.push((0,a.jsx)("button",{onClick:()=>h(m),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===m?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:m},m))}return e})()}),(0,a.jsx)("button",{onClick:()=>h(t+1),disabled:t===m,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===m?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,a.jsx)(i.A,{size:16})})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,a.jsxs)("span",{className:"mr-2",children:[o," per page"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>x(!u),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,a.jsx)(l.A,{size:16})}),u&&(0,a.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,a.jsxs)("button",{onClick:()=>g(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(o===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>x(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,5818,4249,636,6593,8792],()=>t(36909)),_N_E=e.O()}]);