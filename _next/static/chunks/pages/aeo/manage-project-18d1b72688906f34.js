(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6709],{42059:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(37876);r(14232);var s=r(89099);let l=()=>{let e=(0,s.useRouter)(),t=e.asPath,r=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),l=r.map((s,l)=>{let i=l===r.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a="/".concat(r.slice(0,l+1).join("/"));a!==t&&a!=="/".concat(r[0])&&e.push(a)},children:s.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},l)});return(0,a.jsx)("div",{children:l})},i=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap",children:[(0,a.jsx)(l,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},70430:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(37876),s=r(14232),l=r(74562),i=r(65259),n=r(43598),o=r(49034);let d=e=>{let{id:t,args:r,setRefetchQuery:o}=e,[d,x]=(0,s.useState)(!1),[f,h]=(0,s.useState)(null),[g,p]=(0,s.useState)([]),b=e=>{let t=g.find(t=>t.id===e.target.id);t&&(t.value=e.target.value),p(g.map(r=>r.id===e.target.id&&null!=t?t:r))},j=async e=>{e.preventDefault();let r=Object.fromEntries(new FormData(e.target));for(let e in r){let t=r[e].toString().trim();if(!t)return;r[e]=t}x(!0);let a=await i.A.doPost({path:"/orgs/".concat(n.A.current().id,"/querysets/").concat(t),data:{data:{args:r}}});if(a.error){h(a.error.message);return}a.data&&(l.A.hide(),o(e=>!e)),x(!1)},v=(0,s.useCallback)(async()=>{let{data:e,error:t}=await i.A.doGet({path:"/orgs/".concat(n.A.current().id,"/aeo/workflows")});if(t){h("Error fetching workflows"),console.log(t.message);return}e&&p(e.workflows.filter(e=>"qgen"===e.type)[0].args.filter(e=>e.used_for.includes("analysis")).map(e=>({...e,value:r[e.id]})))},[r]);return(0,s.useEffect)(()=>{v()},[v]),(0,a.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:j,children:[(0,a.jsx)("div",{children:g.length>0&&g.map(e=>"textarea"===e.editor?(0,a.jsx)(c,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):"country_dropdown"===e.editor?(0,a.jsx)(m,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):(0,a.jsx)(u,{id:e.id,name:e.name,value:e.value,changeHandler:b,description:e.description,required:e.required},e.id))}),f&&(0,a.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:f}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Update"})]})},u=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,[o,d]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("input",{type:"text",id:t,name:t,value:o,onChange:e=>d(e.target.value),required:i,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},c=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,[o,d]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("textarea",{id:t,name:t,required:i,value:o,onChange:e=>d(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},m=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,d=(0,o.oj)(),[u,c]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("select",{id:t,name:t,required:i,value:u,onChange:e=>c(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(d).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})}},86231:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(37876),s=r(42059),l=r(74562),i=r(70430),n=r(65259),o=r(43598),d=r(14232),u=r(6630);let c=()=>{let[e,t]=(0,d.useState)(null),[r,c]=(0,d.useState)([]),m=async()=>{var e;let{data:t,error:r}=await n.A.doGet({path:"/orgs/".concat(null===(e=o.A.current())||void 0===e?void 0:e.id,"/querysets")});if(r){console.error("Error fetching projects:",r);return}c(t.querysets.map(e=>({id:e.id,org_id:e.org_id,name:e.name,data:e.data||{}})))},x=e=>{let t=r.find(t=>t.id===e.id);return t?t.data.args:{}},f=async()=>{try{let e=await o.A.checkAndGetAeoProject();t(e)}catch(e){console.error("Error fetching current project:",e)}};return(0,d.useEffect)(()=>{f(),m()},[]),(0,d.useEffect)(()=>{e&&o.A.setCurrentAeoProject(e)},[e]),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.A,{children:(0,a.jsx)("button",{className:"bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 transition-colors duration-200 cursor-pointer",onClick:()=>l.A.show("Create new project",(0,a.jsx)(u.default,{}),!1,"90%"),children:"Create New Project"})}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start bg-white p-4 w-full h-[calc(100vh-10rem)] mx-auto",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4 text-gray-700",children:"Manage AEO Projects"}),(0,a.jsxs)("div",{className:"text-lg mb-2",children:["Current Project:"," ",(0,a.jsx)("span",{className:"font-semibold",children:(null==e?void 0:e.name)||"None"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"Select a project from the list below to manage it."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:(null==e?void 0:e.id)||"",onChange:e=>{t(r.find(t=>t.id===e.target.value)||null)},className:"border border-gray-300 rounded-md p-2 w-fit",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a project"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),e&&(0,a.jsx)("button",{className:"w-fit bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 transition-colors duration-200 cursor-pointer",onClick:()=>l.A.show("Edit Business Profile",(0,a.jsx)(i.A,{id:e.id,args:x(e)||{},setRefetchQuery:()=>m()})),children:"Edit Project"})]})]})]})}},96721:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/manage-project",function(){return r(86231)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[9034,4249,636,6593,8792],()=>t(96721)),_N_E=e.O()}]);