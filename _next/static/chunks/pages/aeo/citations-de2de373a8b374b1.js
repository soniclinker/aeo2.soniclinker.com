(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7138],{10377:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/citations",function(){return s(73795)}])},20477:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(37876),l=s(68951),r=s.n(l),i=s(46104);s(14232);let n=e=>{let{isOpen:t,onClose:s,title:l,children:n}=e;return t?(0,a.jsxs)("div",{className:"jsx-593ab1484ff139da fixed inset-0 z-50 flex",children:[(0,a.jsx)("div",{onClick:s,className:"jsx-593ab1484ff139da fixed inset-0 bg-black/20 transition-opacity"}),(0,a.jsxs)("div",{className:"jsx-593ab1484ff139da ml-auto w-1/2 h-full bg-white shadow-xl p-6 relative animate-slide-in-right overflow-y-auto",children:[(0,a.jsx)("button",{onClick:s,"aria-label":"Close",className:"jsx-593ab1484ff139da absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700",children:(0,a.jsx)(i.A,{className:"cursor-pointer",size:20})}),n]}),(0,a.jsx)(r(),{id:"593ab1484ff139da",children:"@-webkit-keyframes slide-in-right{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slide-in-right{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slide-in-right{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slide-in-right{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-slide-in-right{-webkit-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-moz-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-o-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);animation:slide-in-right.3s cubic-bezier(.4,0,.2,1)}"})]}):null}},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(37876);s(14232);var l=s(89099);let r=()=>{let e=(0,l.useRouter)(),t=e.asPath,s=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),r=s.map((l,r)=>{let i=r===s.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a="/".concat(s.slice(0,r+1).join("/"));a!==t&&a!=="/".concat(s[0])&&e.push(a)},children:l.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},r)});return(0,a.jsx)("div",{children:r})},i=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap",children:[(0,a.jsx)(r,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},73795:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(37876),l=s(14232),r=s(7972),i=s(9614),n=s(89099),o=s(65259),d=s(43598),c=s(20477);let x=e=>{let{domain:t,data:s,urlToQueryCount:l,domainCitedCount:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-indigo-600 text-base font-bold mb-9",children:["Domain: ",t]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-0 bg-neutral-100/50 border-b-[0.80px] border-neutral-200 text-neutral-500 text-xs font-semibold ",children:[(0,a.jsx)("div",{className:"px-2 py-2",children:"Webpage URL"}),(0,a.jsx)("div",{className:"px-2 py-2",children:"Topics"}),(0,a.jsx)("div",{className:"px-2 py-2",children:"Cited"}),(0,a.jsx)("div",{className:"px-2 py-2",children:"Questions"})]}),s.map((e,t)=>{var s,i;return(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-0 border-b-[0.80px] border-neutral-200 text-xs items-center",children:[(0,a.jsx)("div",{className:"px-2 py-2 text-blue-700 underline cursor-pointer break-all",children:e.url}),(0,a.jsx)("div",{className:"px-2 py-2",children:e.topic||"-"}),(0,a.jsx)("div",{className:"px-2 py-2",children:null!=r?r:"-"}),(0,a.jsx)("div",{className:"px-2 py-2",children:l?null!==(s=l[e.url])&&void 0!==s?s:"-":null!==(i=e.cited)&&void 0!==i?i:"-"})]},e.url+t)})]})};var u=s(42059),m=s(74562),f=s(6630);let h=()=>{var e,t,s,h,v,p,b,j,g,N,y,w,k;let _=(0,n.useRouter)().query.runId,[z,C]=(0,l.useState)([]),[q,E]=(0,l.useState)(null),[A,S]=(0,l.useState)(null),[D,F]=(0,l.useState)(!1),[P,T]=(0,l.useState)(null),[L,R]=(0,l.useState)(!1),[G,M]=(0,l.useState)(null),[O,Q]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{F(!0),T(null);let e=await d.A.checkAndGetAeoProject();if(!e)return T("Project not found"),F(!1),m.A.show("Create new project",(0,a.jsx)(f.default,{}),!0,"90%");let{data:t,error:s}=await o.A.doGet({path:"/orgs/".concat(d.A.current().id,"/aeoanalysis/tasks?queryset_id=").concat(e.id)});if(s){T("Failed to fetch runs"),F(!1);return}if(C(t.tasks||[]),_&&t.tasks){let e=t.tasks.find(e=>e.id===_);e?E(e):t.tasks.length>0&&E(t.tasks[0])}else t.tasks&&t.tasks.length>0&&E(t.tasks[0]);F(!1)})()},[_]);let W=e=>{E(e),R(!1)};(0,l.useEffect)(()=>{let e=async()=>{if(!q)return;F(!0),T(null);let{data:e,error:t}=await o.A.doGet({path:"/orgs/".concat(d.A.current().id,"/aeoanalysis/tasks/").concat(q.id,"?fetch_result=true")});if(t){T("Failed to fetch analysis data"),F(!1);return}S(e.task),F(!1)};q&&e()},[q]);let H=(null==q?void 0:q.name)||(null==q?void 0:null===(e=q.data)||void 0===e?void 0:e.queryset_name)||(null==q?void 0:q.id)||"-",V=q?new Date(Number(q.created_at)).toLocaleString():"-",X=null!==(y=null==A?void 0:null===(h=A.result)||void 0===h?void 0:null===(s=h.all)||void 0===s?void 0:null===(t=s.queries)||void 0===t?void 0:t.length)&&void 0!==y?y:"-",B=((null==A?void 0:null===(p=A.result)||void 0===p?void 0:null===(v=p.all)||void 0===v?void 0:v.domains)||[]).map(e=>({domain:e.name,frequency:e.num_urls,source:e.type||"-",viewMore:"#"})),I=[];G&&A&&(I=((null===(k=A.result)||void 0===k?void 0:null===(w=k.all)||void 0===w?void 0:w.urls)||[]).filter(e=>e.link&&e.link.includes(G||"")).map(e=>({url:e.link,topic:e.type||"-",cited:e.cited,questions:e.questions,sov:e.sov})));let K={};(null==A?void 0:null===(j=A.result)||void 0===j?void 0:null===(b=j.all)||void 0===b?void 0:b.queries)&&A.result.all.queries.forEach(e=>{e.urls.forEach(e=>{e.includes(G||"")&&(K[e]=(K[e]||0)+1)})});let U=0;return G&&(null==A?void 0:null===(N=A.result)||void 0===N?void 0:null===(g=N.all)||void 0===g?void 0:g.queries)&&A.result.all.queries.forEach(e=>{e.urls.forEach(e=>{e.includes(G)&&U++})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{}),(0,a.jsxs)("div",{className:"bg-white min-h-screen fontDmSans",children:[(0,a.jsx)("div",{className:"bg-violet-50/70 px-6 py-4 flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[#6C47FF] text-base font-medium relative",children:[(0,a.jsx)("span",{className:"text-slate-600 text-xs font-semibold pr-2",children:"Select Run :"}),(0,a.jsxs)("span",{className:"text-slate-500 text-xs font-semibold ml-2 flex items-center gap-1 cursor-pointer select-none relative",onClick:()=>R(e=>!e),children:[H,(0,a.jsx)(r.fK4,{size:16}),L&&(0,a.jsx)("div",{className:"absolute left-0 top-6 z-10 bg-white border border-gray-200 rounded shadow w-48 max-h-56 overflow-y-auto",children:z.map(e=>{var t;return(0,a.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat((null==q?void 0:q.id)===e.id?"bg-gray-100 font-bold":""),onClick:()=>W(e),children:[(0,a.jsx)("div",{className:"font-medium",children:e.name||(null===(t=e.data)||void 0===t?void 0:t.queryset_name)||e.id}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(Number(e.created_at)).toLocaleString()})]},e.id)})})]}),(0,a.jsx)("span",{className:"text-slate-500 text-xs font-semibold ml-2 pr-2",children:V}),(0,a.jsxs)("span",{className:"text-slate-500 text-xs font-semibold ml-1",children:[X," Questions"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-0 px-6 py-3 border-b border-neutral-200 text-neutral-500 text-xs bg-neutral-100/50 font-semibold",children:[(0,a.jsx)("div",{className:"",children:"Top Domains"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Frequency ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Source ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsx)("div",{className:"",children:"View More"})]}),D&&(0,a.jsx)("div",{className:"text-center py-10",children:"Loading..."}),P&&(0,a.jsx)("div",{className:"text-center text-red-500 py-10",children:P}),!D&&!P&&0===B.length&&(0,a.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No domains found."}),!D&&!P&&B.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-0 px-6 py-3 border-b border-[#E5E7EB] items-center text-sm bg-white",children:[(0,a.jsx)("div",{className:"text-neutral-900 text-xs font-medium",children:e.domain}),(0,a.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:e.frequency}),(0,a.jsx)("div",{className:"text-neutral-700 text-xs font-normal",children:e.source}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>{M(e.domain),Q(!0)},children:"View More"})})]},e.domain+t)),(0,a.jsx)(c.A,{isOpen:O,onClose:()=>Q(!1),title:G?"Domain: ".concat(G):"",children:(0,a.jsx)(x,{domain:G||"",data:I,urlToQueryCount:K,domainCitedCount:U})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,6703,4249,636,6593,8792],()=>t(10377)),_N_E=e.O()}]);