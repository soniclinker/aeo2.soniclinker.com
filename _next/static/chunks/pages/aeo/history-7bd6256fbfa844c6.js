(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8672],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7492:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var a=s(37876);s(14232);var n=s(69241),r=s(95313);let i={default:"bg-gray-500 hover:bg-gray-600 text-white",white:"bg-white hover:bg-gray-100 text-indigo-700 border border-indigo-700",primary:"bgHardBlue hover:bgHardBlue text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},l=e=>{let{variant:t="default",loading:s=!1,children:l,className:c,loaderIcon:d,...o}=e;return(0,a.jsx)("button",{className:(0,n.A)(" text-xs font-semibold px-4 py-2 rounded-lg transition cursor-pointer flex items-center justify-center gap-2",i[t],c),disabled:s||o.disabled,...o,children:s?d||(0,a.jsx)(r.A,{className:"h-4 w-4 animate-spin"}):l})}},31984:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(37876),n=s(42059),r=s(74562),i=s(7492),l=s(65259),c=s(43598),d=s(16821),o=s(83350),x=s(89099),u=s(14232),m=s(38412);s(16691),s(58198);var h=s(7972),f=s(9614),p=s(6630);let g={running:"bg-blue-100 text-blue-600",completed:"bg-green-100 text-green-600",failed:"bg-red-100 text-red-500"},j=new Date,b=new Date(j);b.setDate(j.getDate()-7),b.setHours(0,0,0,0);let y=new Date(j);y.setHours(23,59,59,999);let v={startDate:b.getTime(),endDate:y.getTime(),key:"selection"},N=()=>{let e=sessionStorage.getItem("date_range");if(!e)return null;let t=JSON.parse(e),s=new Date(t.startDate),a=new Date(t.endDate),n=new Date;return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate()&&(a=n),{startDate:s.getTime(),endDate:a.getTime(),key:t.key||"selection"}},w=()=>{let e=(0,x.useRouter)(),[t,s]=(0,u.useState)([]),[j,b]=(0,u.useState)(!1),[y,w]=(0,u.useState)(null),[D,_]=(0,u.useState)(v),[k,C]=(0,u.useState)(!1),S="".concat((0,o.GP)(D.startDate,"MMM dd, yyyy")," â€“ ").concat((0,o.GP)(D.endDate,"MMM dd, yyyy")),T=(0,u.useRef)(null),[A,E]=(0,u.useState)(""),[P,O]=(0,u.useState)(null),[I,H]=(0,u.useState)(1),M=Math.ceil(t.length/10),q=t.slice((I-1)*10,10*I),z=()=>{sessionStorage.removeItem("date_range"),_(v)},R=async e=>{var t;let a="/orgs/".concat(null===(t=c.A.current())||void 0===t?void 0:t.id,"/aeoanalysis/tasks?queryset_id=").concat(e);D.startDate&&D.endDate&&(a+="&start_date=".concat(D.startDate,"&end_date=").concat(D.endDate));let{data:n,error:r}=await l.A.doGet({path:a});if(r){w("Failed to fetch runs"),s([]),b(!1);return}return s(n.tasks||[]),n.tasks.length},F=e=>{let t=e.startDate?new Date(e.startDate):new Date;t.setHours(0,0,0,0);let s=e.endDate?new Date(e.endDate):new Date;return s.setHours(23,59,59,999),{startDate:t.getTime(),endDate:s.getTime(),key:"selection"}};return(0,u.useEffect)(()=>{A&&R(A)},[D,A]),(0,u.useEffect)(()=>{let e;b(!0);let t=d.A.getInstance(c.A.current().id);return(async()=>{let e=await c.A.checkAndGetAeoProject();return e||(w("Project not found"),b(!1),r.A.show("Create new project",(0,a.jsx)(p.default,{}),!0,"90%"))})().then(s=>{E(s.id),O(s);let a=N();a&&_(a),b(!1),e=e=>{"analysis_task_status"===e.type&&R(s.id)},t.on("message",e)}),()=>{t.off("message",e)}},[]),(0,u.useEffect)(()=>{I>M&&H(1)},[M,I]),(0,u.useEffect)(()=>{if(k)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){T.current&&!T.current.contains(e.target)&&C(!1)}},[k]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:(0,a.jsxs)(n.A,{children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(i.$,{variant:"primary",className:"hover:bg-[#5a3fd6] transition-all",onClick:async()=>{let{id:t}=await c.A.checkAndGetAeoProject();t&&e.push({pathname:"/aeo/manage",query:{id:t}})},children:"Create New Run"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 text-xs bg-white",onClick:()=>C(e=>!e),children:[(0,a.jsx)("span",{className:"mr-2",children:S}),(0,a.jsx)(h.fK4,{className:"text-base"})]}),(0,a.jsx)(i.$,{variant:"white",onClick:()=>z(),children:"Clear"})]}),k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>C(!1),style:{background:"transparent"}}),(0,a.jsx)("div",{className:"absolute right-0 z-20 bg-white shadow-lg mt-2",children:(0,a.jsx)(m.ad,{editableDateInputs:!0,onChange:e=>{let t=F(e.selection);_(t),sessionStorage.setItem("date_range",JSON.stringify(t))},ranges:[{...D,startDate:new Date(D.startDate),endDate:new Date(D.endDate)}],maxDate:new Date})})]})]})})]})}),(0,a.jsxs)("div",{className:"px-4 py-6 bg-white min-h-screen fontDmSans",children:[(0,a.jsxs)("div",{className:"w-full overflow-x-auto",children:[(0,a.jsxs)("div",{className:"hidden md:grid min-w-[700px] w-full grid-cols-5 gap-0 px-6 py-3 rounded-t-lg border-b border-neutral-200 text-neutral-500 text-xs font-medium ",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["SOV"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(f.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Start Time"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(f.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Questions"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(f.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Status"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(f.H2l,{size:16,className:"text-neutral-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["More"," ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(f.H2l,{size:16,className:"text-neutral-500"})})]})]}),j&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})}),!j&&y&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("span",{className:"text-red-500",children:y})}),!j&&!y&&0===t.length&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No runs found for this question set."})}),!j&&!y&&q.map(t=>{let s=t.data&&"object"==typeof t.data&&"result"in t.data?t.data.result:void 0,n=s&&void 0!==s.sov?"".concat(Number(s.sov).toFixed(2),"%"):"--",r=s&&void 0!==s.num_questions?"".concat(s.num_questions):"--",i=t.status?t.status.toLowerCase():"unknown";return(0,a.jsxs)("div",{className:"hidden md:grid min-w-[700px] w-full grid-cols-5 gap-0 px-6 py-3 border-b border-[#E5E7EB] items-center justify-center text-sm",children:[(0,a.jsx)("div",{className:"text-neutral-900 text-xs font-medium",children:n}),(0,a.jsx)("div",{className:"text-black text-xs font-normal",children:new Date(Number(t.created_at)).toLocaleString()}),(0,a.jsx)("div",{className:"text-neutral-950 text-xs font-normal flex items-center",children:r}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs capitalize font-semibold ".concat(g[i]||""),children:t.status})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>e.push("/aeo/history/questions?runId=".concat(t.id)),children:"View Questions"}),(0,a.jsx)("button",{className:"text-indigo-600 hover:underline text-xs font-medium",onClick:()=>e.push("/aeo/citations?runId=".concat(t.id)),children:"View Citations"})]})]},t.id)}),(0,a.jsx)("div",{className:"block md:hidden",children:q.map(t=>{let s=t.data&&"object"==typeof t.data&&"result"in t.data?t.data.result:void 0,n=s&&void 0!==s.sov?"".concat(Number(s.sov).toFixed(2),"%"):"--",r=s&&void 0!==s.num_questions?"".concat(s.num_questions):"--",i=t.status?t.status.toLowerCase():"unknown";return(0,a.jsx)("div",{className:"mx-1 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm",children:(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between min-w-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"SOV:"}),(0,a.jsx)("div",{className:"text-black font-bold text-base",children:n})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-xs mt-2 break-words flex flex-col",children:["Start Time:"," ",(0,a.jsx)("span",{className:" mt-1 font-medium text-neutral-900",children:new Date(Number(t.created_at)).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,a.jsxs)("div",{className:"text-gray-500 flex flex-col items-end text-xs",children:["Questions: ",r,(0,a.jsx)("span",{className:"mt-1 px-2 py-0.5 rounded-full text-xs font-semibold ".concat(g[i]||""),children:t.status})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1 mt-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:underline text-sm font-medium",onClick:()=>e.push("/aeo/history/questions?runId=".concat(t.id)),children:"View Questions"}),(0,a.jsx)("button",{className:"text-blue-600 hover:underline text-sm font-medium",onClick:()=>e.push("/aeo/citations?runId=".concat(t.id)),children:"View Citations"})]})]})]})},t.id+"-card")})})]}),(0,a.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"ml-2 px-2 py-1 border rounded disabled:opacity-50",onClick:()=>H(e=>Math.max(1,e-1)),disabled:1===I,children:"Prev"}),(0,a.jsxs)("span",{className:"mx-2 text-xs",children:["Page ",I," of ",M||1]}),(0,a.jsx)("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:()=>H(e=>Math.min(M,e+1)),disabled:I===M||0===M,children:"Next"})]})})]})]})}},36909:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/history",function(){return s(31984)}])},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(37876);s(14232);var n=s(89099);let r=()=>{let e=(0,n.useRouter)(),t=e.asPath,s=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),r=s.map((n,r)=>{let i=r===s.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a="/".concat(s.slice(0,r+1).join("/"));a!==t&&a!=="/".concat(s[0])&&e.push(a)},children:n.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},r)});return(0,a.jsx)("div",{children:r})},i=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap",children:[(0,a.jsx)(r,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},69241:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=function(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}},79706:(e,t,s)=>{"use strict";var a=s(3717);function n(){}function r(){}r.resetWarningCache=n,e.exports=function(){function e(e,t,s,n,r,i){if(i!==a){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:n};return s.PropTypes=s,s}},95062:(e,t,s)=>{e.exports=s(79706)()}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,5818,4249,636,6593,8792],()=>t(36909)),_N_E=e.O()}]);