(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4974],{6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/history/questions",function(){return s(24159)}])},20477:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(37876),l=s(68951),n=s.n(l),r=s(46104);s(14232);let i=e=>{let{isOpen:t,onClose:s,title:l,children:i}=e;return t?(0,a.jsxs)("div",{className:"jsx-593ab1484ff139da fixed inset-0 z-50 flex",children:[(0,a.jsx)("div",{onClick:s,className:"jsx-593ab1484ff139da fixed inset-0 bg-black/20 transition-opacity"}),(0,a.jsxs)("div",{className:"jsx-593ab1484ff139da ml-auto w-full md:w-1/2 h-full bg-white shadow-xl p-6 relative animate-slide-in-right overflow-y-auto",children:[(0,a.jsx)("button",{onClick:s,"aria-label":"Close",className:"jsx-593ab1484ff139da absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700",children:(0,a.jsx)(r.A,{className:"cursor-pointer",size:20})}),i]}),(0,a.jsx)(n(),{id:"593ab1484ff139da",children:"@-webkit-keyframes slide-in-right{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slide-in-right{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slide-in-right{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slide-in-right{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-slide-in-right{-webkit-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-moz-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-o-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);animation:slide-in-right.3s cubic-bezier(.4,0,.2,1)}"})]}):null}},24159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(37876),l=s(14232),n=s(89099),r=s(20477),i=s(63562);let d=e=>{let{question:t,answer:s,runName:l="Run",runTime:n="",sovScore:r="--",citationsCount:d=0,sources:o}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-black text-base font-bold mb-9",children:"Reply Summary"}),(0,a.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap flex-col md:flex-row items-center gap-3 bg-violet-50/70 -mx-6 px-6 py-4 mb-6",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2 text-slate-600 text-xs font-semibold",children:[(0,a.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-green-400 inline-block"}),"Completed Run"]}),(0,a.jsx)("span",{className:"text-slate-500 text-xs font-medium",children:l}),(0,a.jsx)("span",{className:"text-slate-500 text-xs font-semibold",children:n}),(0,a.jsxs)("span",{className:"text-slate-500 text-xs font-semibold md:ml-auto",children:["SOV Score: ",r]}),(0,a.jsxs)("span",{className:"text-slate-500 text-xs font-semibold",children:["Citations: ",d]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)("div",{className:"flex justify-end md:justify-end",children:(0,a.jsx)("span",{className:"bg-indigo-100 px-4 py-2 rounded-lg text-indigo-500 text-xs font-medium",children:t})}),(0,a.jsx)("div",{className:"rounded-lg max-w-xl px-3 py-2 bg-zinc-100/75 text-neutral-950 text-xs font-normal leading-relaxed mb-8 bg-red-00",children:(0,a.jsx)(i.A,{content:s})})]}),o&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Sources"}),(0,a.jsx)("ul",{className:"hidden md:list-disc md:ml-6 text-indigo-600 text-xs font-light",children:(null!=o?o:[]).map((e,t)=>(0,a.jsx)("li",{className:"text-sm text-indigo-500 font-normal break-all my-2 hover:underline",children:(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))}),(0,a.jsx)("div",{className:"block md:hidden",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(null!=o?o:[]).map((e,t)=>(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline text-indigo-600 text-xs font-light border rounded-lg p-3 bg-white shadow-sm break-all",children:e},t))})})]})]})};var o=s(65259),x=s(43598),c=s(42059);let m=()=>{let e=(0,n.useRouter)().query.runId,[t,s]=(0,l.useState)([]),[i,m]=(0,l.useState)([]),[u,h]=(0,l.useState)(!1),[f,b]=(0,l.useState)(null),[v,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(null),[N,y]=(0,l.useState)(""),[w,k]=(0,l.useState)(""),[_,S]=(0,l.useState)("--"),[C,z]=(0,l.useState)("--"),[A,E]=(0,l.useState)(1),q=t.slice((A-1)*10,10*A),P=Math.ceil(t.length/10);(0,l.useEffect)(()=>{e&&(async()=>{var t,a,l,n,r,i,d,c,u,h,f,b,v,j,N;p(!0),g(null);let{data:w,error:_}=await o.A.doGet({path:"/orgs/".concat(null===(t=x.A.current())||void 0===t?void 0:t.id,"/aeoanalysis/tasks/").concat(e,"?fetch_result=true")});if(_){g("Failed to fetch questions"),p(!1);return}s((null==w?void 0:null===(n=w.task)||void 0===n?void 0:null===(l=n.result)||void 0===l?void 0:null===(a=l.all)||void 0===a?void 0:a.queries)||[]),y((null==w?void 0:null===(i=w.task)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.queryset_name)||(null==w?void 0:null===(c=w.task)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.queryset_id)||"Run"),k((null==w?void 0:null===(u=w.task)||void 0===u?void 0:u.created_at)?new Date(Number(w.task.created_at)).toLocaleString():""),S("number"==typeof(null==w?void 0:null===(b=w.task)||void 0===b?void 0:null===(f=b.result)||void 0===f?void 0:null===(h=f.own)||void 0===h?void 0:h.sov)?"".concat(w.task.result.own.sov.toFixed(2),"%"):"--"),z((null==w?void 0:null===(N=w.task)||void 0===N?void 0:null===(j=N.data)||void 0===j?void 0:null===(v=j.input)||void 0===v?void 0:v.location)||"--"),m([]),p(!1)})()},[e]),i.length,t.length,i.length;let R=e=>{m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{}),(0,a.jsxs)("div",{className:"bg-white min-h-screen px-5 md:px-8 py-6 fontDmSans",children:[(0,a.jsxs)("div",{className:"hidden md:grid grid-cols-5 gap-0 py-3 border-b border-[#E5E7EB] text-neutral-500 text-xs font-medium bg-white",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("span",{children:"Questions"})}),(0,a.jsx)("div",{className:"",children:"Location"}),(0,a.jsx)("div",{className:"",children:"Question"}),(0,a.jsx)("div",{className:"",children:"Actions"}),(0,a.jsx)("div",{className:""})]}),v&&(0,a.jsx)("div",{className:"py-8 text-center text-gray-400",children:"Loading..."}),j&&(0,a.jsx)("div",{className:"py-8 text-center text-red-500",children:j}),!v&&!j&&q.map((e,t)=>(0,a.jsxs)("div",{className:"hidden md:grid grid-cols-5 gap-2 py-3 border-b border-[#E5E7EB] items-center text-base bg-white",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("span",{className:"text-indigo-600 text-xs font-normal ".concat(i.includes(t)?"text-[#6C47FF]":"text-gray-700"),children:e.query})}),(0,a.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:C}),(0,a.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:e.query}),(0,a.jsx)("div",{className:"text-indigo-500 text-xs font-normal hover:underline cursor-pointer",onClick:()=>{b(t),h(!0)},children:"View Answer"}),(0,a.jsx)("div",{})]},t)),(0,a.jsx)("div",{className:"block md:hidden",children:!v&&!j&&q.map((e,t)=>(0,a.jsx)("div",{className:"mx-0 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm",children:(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,a.jsx)("input",{type:"checkbox",className:"mt-1",checked:i.includes(t),onChange:()=>R(t)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Question:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800 break-words",children:e.query})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,a.jsxs)("div",{className:"text-gray-500 text-xs text-right",children:["Location: ",C]}),(0,a.jsx)("button",{className:"text-blue-600 text-xs font-normal hover:underline cursor-pointer mt-2",onClick:()=>{b(t),h(!0)},children:"View Answer"})]})]})},t+"-card"))}),P>1&&(0,a.jsxs)("div",{className:"flex justify-end items-center mt-4",children:[(0,a.jsx)("button",{className:"ml-2 px-2 py-1 border rounded disabled:opacity-50",onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===A,children:"Prev"}),(0,a.jsxs)("span",{className:"mx-2 text-xs",children:["Page ",A," of ",P]}),(0,a.jsx)("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:()=>E(e=>Math.min(P,e+1)),disabled:A===P,children:"Next"})]}),(0,a.jsx)(r.A,{isOpen:u,onClose:()=>h(!1),children:null!==f&&t[f]&&(0,a.jsx)(d,{question:t[f].query,answer:t[f].answer||"",runName:N,runTime:w,sovScore:_,citationsCount:Array.isArray(t[f].annotations)?t[f].annotations.length:0})})]})]})}},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(37876);s(14232);var l=s(89099);let n=()=>{let e=(0,l.useRouter)(),t=e.asPath,s=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),n=s.map((l,n)=>{let r=n===s.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(r)return;let a="/".concat(s.slice(0,n+1).join("/"));a!==t&&a!=="/".concat(s[0])&&e.push(a)},children:l.replace(/-/g," ")}),!r&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},n)});return(0,a.jsx)("div",{children:n})},r=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap",children:[(0,a.jsx)(n,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},63562:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(37876);s(14232);var l=s(42386),n=s(96577);let r=e=>{let{content:t}=e;return(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)(l.oz,{remarkPlugins:[n.A],components:{table:e=>{let{node:t,...s}=e;return(0,a.jsx)("table",{className:"w-full border-collapse mt-4 mb-4 text-sm leading-6 text-[#1e2035]",...s})},thead:e=>{let{node:t,...s}=e;return(0,a.jsx)("thead",{className:"bg-slate-300",...s})},th:e=>{let{node:t,...s}=e;return(0,a.jsx)("th",{className:"border border-slate-200 px-2 py-2 text-left font-bold",...s})},td:e=>{let{node:t,...s}=e;return(0,a.jsx)("td",{className:"border border-slate-200 px-2 py-2 text-left",...s})},tr:e=>{let{node:t,...s}=e;return(0,a.jsx)("tr",{className:"even:bg-primary",...s})},a:e=>{let{node:t,...s}=e;return(0,a.jsx)("a",{className:"textPrimary underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...s})}},children:t})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2930,2808,636,6593,8792],()=>t(6760)),_N_E=e.O()}]);