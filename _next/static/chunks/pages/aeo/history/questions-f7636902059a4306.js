(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4974],{6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/history/questions",function(){return s(24159)}])},20477:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(37876),l=s(68951),n=s.n(l),a=s(46104);s(14232);let i=e=>{let{isOpen:t,onClose:s,title:l,children:i}=e;return t?(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da fixed inset-0 z-50 flex",children:[(0,r.jsx)("div",{onClick:s,className:"jsx-593ab1484ff139da fixed inset-0 bg-black/20 transition-opacity"}),(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da ml-auto w-full md:w-1/2 h-full bg-white shadow-xl p-6 relative animate-slide-in-right overflow-y-auto",children:[(0,r.jsx)("button",{onClick:s,"aria-label":"Close",className:"jsx-593ab1484ff139da absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700",children:(0,r.jsx)(a.A,{className:"cursor-pointer",size:20})}),i]}),(0,r.jsx)(n(),{id:"593ab1484ff139da",children:"@-webkit-keyframes slide-in-right{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slide-in-right{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slide-in-right{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slide-in-right{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-slide-in-right{-webkit-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-moz-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-o-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);animation:slide-in-right.3s cubic-bezier(.4,0,.2,1)}"})]}):null}},24159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(37876),l=s(14232),n=s(89099),a=s(20477),i=s(51421);let o=e=>{let{question:t,answer:s,runName:l="Run",runTime:n="",sovScore:a="--",citationsCount:o=0,sources:d=[],brands:c=[],citations:m=[]}=e;return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsx)("div",{className:"text-black max-w-fit text-base font-bold mb-9 sticky top-0 z-10 pt-4 pb-4",children:"Reply Summary"}),(0,r.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap flex-col md:flex-row items-center gap-3 bg-violet-50/70 -mx-6 px-6 py-4 mb-6",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 text-slate-600 text-xs font-semibold",children:[(0,r.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-green-400 inline-block"}),"Completed Run"]}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-medium",children:l}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-semibold",children:n}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold md:ml-auto",children:["SOV Score: ",a]}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold",children:["Citations: ",o]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsx)("div",{className:"flex justify-end md:justify-end",children:(0,r.jsx)("span",{className:"bg-indigo-100 px-4 py-2 rounded-lg text-indigo-500 text-xs font-medium",children:t})}),(0,r.jsx)("div",{className:"rounded-lg max-w-xl px-3 py-2 bg-zinc-100/75 text-neutral-950 text-xs font-normal leading-relaxed mb-8 bg-red-00",children:(0,r.jsx)(i.A,{content:s})}),c.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Brands"}),(0,r.jsx)("ul",{className:"list-disc ml-6 text-indigo-600 text-xs font-light",children:c.map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-indigo-500 font-normal my-2",children:e},t))})]}),m.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Citations"}),(0,r.jsx)("ul",{className:"list-disc ml-6 text-indigo-600 text-xs font-light",children:m.map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-indigo-500 font-normal break-all my-2 hover:underline",children:(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))})]}),d.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Sources"}),(0,r.jsx)("ul",{className:"list-disc ml-6 text-indigo-600 text-xs font-light",children:d.map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-indigo-500 font-normal break-all my-2 hover:underline",children:(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))})]})]})})]})};var d=s(65259),c=s(43598),m=s(42059),x=s(98188);let u=()=>{let e=(0,n.useRouter)().query.runId,[t,s]=(0,l.useState)([]),[i,u]=(0,l.useState)([]),[h,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(null),[b,j]=(0,l.useState)(!1),[v,y]=(0,l.useState)(null),[w,N]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[S,A]=(0,l.useState)("--"),[_,z]=(0,l.useState)("--"),[E,P]=(0,l.useState)(1),[O,q]=(0,l.useState)(10),T=t.slice((E-1)*O,E*O);t.length,(0,l.useEffect)(()=>{e&&(async()=>{var t,r,l,n,a,i,o,m,x,h,f,p,g,b,v;j(!0),y(null);let{data:w,error:k}=await d.A.doGet({path:"/orgs/".concat(null===(t=c.A.current())||void 0===t?void 0:t.id,"/aeoanalysis/tasks/").concat(e,"?fetch_result=true")});if(k){y("Failed to fetch questions"),j(!1);return}s((null==w?void 0:null===(n=w.task)||void 0===n?void 0:null===(l=n.result)||void 0===l?void 0:null===(r=l.all)||void 0===r?void 0:r.queries)||[]),N((null==w?void 0:null===(i=w.task)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.queryset_name)||(null==w?void 0:null===(m=w.task)||void 0===m?void 0:null===(o=m.data)||void 0===o?void 0:o.queryset_id)||"Run"),C((null==w?void 0:null===(x=w.task)||void 0===x?void 0:x.created_at)?new Date(Number(w.task.created_at)).toLocaleString():""),A("number"==typeof(null==w?void 0:null===(p=w.task)||void 0===p?void 0:null===(f=p.result)||void 0===f?void 0:null===(h=f.own)||void 0===h?void 0:h.sov)?"".concat(w.task.result.own.sov.toFixed(2),"%"):"--"),z((null==w?void 0:null===(v=w.task)||void 0===v?void 0:null===(b=v.data)||void 0===b?void 0:null===(g=b.input)||void 0===g?void 0:g.location)||"--"),u([]),j(!1)})()},[e]),i.length,t.length,i.length;let R=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col bg-white",children:[(0,r.jsx)("div",{className:"sticky top-0 z-30 bg-white",children:(0,r.jsx)(m.A,{})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"bg-white min-h-screen px-5 md:px-8 py-6 fontDmSans",children:[(0,r.jsxs)("div",{className:"hidden md:grid grid-cols-5 gap-0 py-3 border-b border-[#E5E7EB] text-neutral-500 text-xs font-medium bg-white",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("span",{children:"Questions"})}),(0,r.jsx)("div",{className:"",children:"Location"}),(0,r.jsx)("div",{className:"",children:"Question"}),(0,r.jsx)("div",{className:"",children:"Actions"}),(0,r.jsx)("div",{className:""})]}),b&&(0,r.jsx)("div",{className:"py-8 text-center text-gray-400",children:"Loading..."}),v&&(0,r.jsx)("div",{className:"py-8 text-center text-red-500",children:v}),!b&&!v&&T.map((e,t)=>(0,r.jsxs)("div",{className:"hidden md:grid grid-cols-5 gap-2 py-3 border-b border-[#E5E7EB] items-center text-base bg-white",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("span",{className:"text-indigo-600 text-xs font-normal ".concat(i.includes(t)?"text-[#6C47FF]":"text-gray-700"),children:e.query})}),(0,r.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:_}),(0,r.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:e.query}),(0,r.jsx)("div",{className:"text-indigo-500 text-xs font-normal hover:underline cursor-pointer",onClick:()=>{g(t),f(!0)},children:"View Answer"}),(0,r.jsx)("div",{})]},t)),(0,r.jsx)("div",{className:"block md:hidden",children:!b&&!v&&T.map((e,t)=>(0,r.jsx)("div",{className:"mx-0 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm",children:(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,r.jsx)("input",{type:"checkbox",className:"mt-1",checked:i.includes(t),onChange:()=>R(t)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-gray-500 text-xs",children:"Question:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-800 break-words",children:e.query})]})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-gray-500 text-xs text-right",children:["Location: ",_]}),(0,r.jsx)("button",{className:"text-blue-600 text-xs font-normal hover:underline cursor-pointer mt-2",onClick:()=>{g(t),f(!0)},children:"View Answer"})]})]})},t+"-card"))}),(0,r.jsx)(x.A,{currentPage:E,setCurrentPage:P,totalItems:t.length,itemsPerPage:O,setItemsPerPage:q}),(0,r.jsx)(a.A,{isOpen:h,onClose:()=>f(!1),children:null!==p&&t[p]&&(0,r.jsx)(o,{question:t[p].query,answer:t[p].answer||"",runName:w,runTime:k,sovScore:S,citationsCount:Array.isArray(t[p].annotations)?t[p].annotations.length:0,brands:t[p].brands||[],citations:t[p].urls||[],sources:t[p].sources||t[p].urls||[]})})]})})]})})}},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(89099),a=s(43598);let i=()=>{let e=(0,n.useRouter)(),t=e.asPath,[s,i]=(0,l.useState)(""),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?s:e),d=o.map((s,l)=>{let n=l===o.length-1;return(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(n)return;let s="/".concat(o.slice(0,l+1).join("/"));s!==t&&s!=="/".concat(o[0])&&e.push(s)},children:s.replace(/-/g," ")}),!n&&(0,r.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},l)});return(0,l.useEffect)(()=>{(async()=>{let e=await a.A.currentAeoProject();e&&i(e.name)})()},[]),(0,r.jsx)("div",{children:d})},o=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,r.jsx)(i,{}),t&&(0,r.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},51421:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(37876);s(14232);var l=s(3610),n=s(45539),a=s(9828),i=s(14883),o=s(86278),d=s(13332),c=s(73435),m=s(65721);let x=[],u={allowDangerousHtml:!0},h=/^(https?|ircs?|mailto|xmpp)$/i,f=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function p(e){let t=function(e){let t=e.rehypePlugins||x,s=e.remarkPlugins||x,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...u}:u;return(0,d.l)().use(i.A).use(s).use(o.A,r).use(t)}(e),s=function(e){let t=e.children||"",s=new m.T;return"string"==typeof t?s.value=t:(0,l.HB)("Unexpected value `"+t+"` for `children` prop, expected `string`"),s}(e);return function(e,t){let s=t.allowedElements,i=t.allowElement,o=t.components,d=t.disallowedElements,m=t.skipHtml,x=t.unwrapDisallowed,u=t.urlTransform||g;for(let e of f)Object.hasOwn(t,e.from)&&(0,l.HB)("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return s&&d&&(0,l.HB)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),(0,c.YR)(e,function(e,t,r){if("raw"===e.type&&r&&"number"==typeof t)return m?r.children.splice(t,1):r.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in a.$)if(Object.hasOwn(a.$,t)&&Object.hasOwn(e.properties,t)){let s=e.properties[t],r=a.$[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=u(String(s||""),t,e))}}if("element"===e.type){let l=s?!s.includes(e.tagName):!!d&&d.includes(e.tagName);if(!l&&i&&"number"==typeof t&&(l=!i(e,t,r)),l&&r&&"number"==typeof t)return x&&e.children?r.children.splice(t,1,...e.children):r.children.splice(t,1),t}}),(0,n.H)(e,{Fragment:r.Fragment,components:o,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(s),s),e)}function g(e){let t=e.indexOf(":"),s=e.indexOf("?"),r=e.indexOf("#"),l=e.indexOf("/");return -1===t||-1!==l&&t>l||-1!==s&&t>s||-1!==r&&t>r||h.test(e.slice(0,t))?e:""}var b=s(96577);let j=e=>{let{content:t}=e;return(0,r.jsx)("div",{className:"prose max-w-none",children:(0,r.jsx)(p,{remarkPlugins:[b.A],components:{table:e=>{let{node:t,...s}=e;return(0,r.jsx)("table",{className:"w-full border-collapse mt-4 mb-4 text-sm leading-6 text-[#1e2035]",...s})},thead:e=>{let{node:t,...s}=e;return(0,r.jsx)("thead",{className:"bg-slate-300",...s})},th:e=>{let{node:t,...s}=e;return(0,r.jsx)("th",{className:"border border-slate-200 px-2 py-2 text-left font-bold",...s})},td:e=>{let{node:t,...s}=e;return(0,r.jsx)("td",{className:"border border-slate-200 px-2 py-2 text-left",...s})},tr:e=>{let{node:t,...s}=e;return(0,r.jsx)("tr",{className:"even:bg-primary",...s})},a:e=>{let{node:t,...s}=e;return(0,r.jsx)("a",{className:"textPrimary underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...s})}},children:t})})}},98188:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(6246),a=s(28067),i=s(48963);let o=e=>{let{currentPage:t,setCurrentPage:s,totalItems:o,itemsPerPage:d,setItemsPerPage:c}=e,[m,x]=(0,l.useState)(!1),u=Math.ceil(o/d);if(o<=1)return null;let h=e=>{e>=1&&e<=u&&s(e)},f=e=>{c(e),s(1),x(!1)};return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,r.jsxs)("span",{children:["Page ",t," of ",u]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>h(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(n.A,{size:16})}),(0,r.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(u<=5)for(let s=1;s<=u;s++)e.push((0,r.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,r.jsx)("button",{onClick:()=>h(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,u-1);s++)e.push((0,r.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));u>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=u-2){u>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(u-3,2);s<=u-1;s++)e.push((0,r.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,r.jsx)("button",{onClick:()=>h(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}u>1&&e.push((0,r.jsx)("button",{onClick:()=>h(u),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===u?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:u},u))}return e})()}),(0,r.jsx)("button",{onClick:()=>h(t+1),disabled:t===u,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===u?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(a.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,r.jsxs)("span",{className:"mr-2",children:[d," per page"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>x(!m),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,r.jsx)(i.A,{size:16})}),m&&(0,r.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,r.jsxs)("button",{onClick:()=>f(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(d===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),m&&(0,r.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>x(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2930,9526,636,6593,8792],()=>t(6760)),_N_E=e.O()}]);