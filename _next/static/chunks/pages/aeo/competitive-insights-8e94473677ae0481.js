(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8297],{32722:(e,t,s)=>{"use strict";function l(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}s.d(t,{_:()=>l})},35712:(e,t,s)=>{"use strict";function l(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}s.d(t,{_:()=>l})},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var l=s(37876);s(14232);var a=s(89099);let n=()=>{let e=(0,a.useRouter)(),t=e.asPath,s=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))),n=s.map((a,n)=>{let i=n===s.length-1;return(0,l.jsxs)("div",{className:"inline",children:[(0,l.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let l="/".concat(s.slice(0,n+1).join("/"));l!==t&&l!=="/".concat(s[0])&&e.push(l)},children:a.replace(/-/g," ")}),!i&&(0,l.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},n)});return(0,l.jsx)("div",{children:n})},i=e=>{let{children:t}=e;return(0,l.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap",children:[(0,l.jsx)(n,{}),t&&(0,l.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42874:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var l=s(32722),a=s(35712);function n(e,t,s){return(0,l._)(e,t),(0,a._)(s,"get"),s.get?s.get.call(e):s.value}},49279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var l=s(37876),a=s(14232),n=s(7972),i=s(9614),r=s(89099),d=s(65259),o=s(43598),c=s(42059),x=s(74562),u=s(6630),m=s(94344);let f=()=>{var e,t,s,f,v,h,p,b,j,g,N,w;let y=(0,r.useRouter)().query.runId,[E,_]=(0,a.useState)([]),[k,F]=(0,a.useState)(null),[S,A]=(0,a.useState)(null),[q,C]=(0,a.useState)(!1),[P,B]=(0,a.useState)(null),[z,M]=(0,a.useState)(!1),[R,T]=(0,a.useState)(1),L=(0,a.useRef)(null),D=(0,a.useRef)(null);(0,m.A)([L,D],()=>M(!1));let G="My Brand";if(null==S?void 0:null===(t=S.result)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.args){for(let e of S.result.info.args)if("brand"===e.id){G=(e.value||"").trim().split(",")[0].trim();break}}let H=[{name:G,sov:(null==S?void 0:null===(f=S.result)||void 0===f?void 0:null===(s=f.own)||void 0===s?void 0:s.sov)||0,queries:(null==S?void 0:null===(h=S.result)||void 0===h?void 0:null===(v=h.own)||void 0===v?void 0:v.queries)||[]},...(null==S?void 0:null===(p=S.result)||void 0===p?void 0:p.others)||[]];H.sort((e,t)=>t.sov-e.sov);let O=Math.ceil(H.length/10),V=H.slice((R-1)*10,10*R);(0,a.useEffect)(()=>{R>O&&O>0?T(O):0===O&&1!==R&&T(1)},[H.length,O,R]),(0,a.useEffect)(()=>{(async()=>{C(!0),B(null);let e=await o.A.checkAndGetAeoProject();if(!e)return B("Project not found"),C(!1),x.A.show("Create new project",(0,l.jsx)(u.default,{}),!0,"90%");let{data:t,error:s}=await d.A.doGet({path:"/orgs/".concat(o.A.current().id,"/aeoanalysis/tasks?queryset_id=").concat(e.id)});if(s){B("Failed to fetch runs"),C(!1);return}if(_(t.tasks||[]),y&&t.tasks){let e=t.tasks.find(e=>e.id===y);e?F(e):t.tasks.length>0&&F(t.tasks[0])}else t.tasks&&t.tasks.length>0&&F(t.tasks[0]);C(!1)})()},[y]);let W=e=>{F(e),M(!1)};(0,a.useEffect)(()=>{let e=async()=>{if(!k)return;B(null);let{data:e,error:t}=await d.A.doGet({path:"/orgs/".concat(o.A.current().id,"/aeoanalysis/tasks/").concat(k.id,"?fetch_result=true")});if(t){B("Failed to fetch analysis data"),C(!1);return}A(e.task)};k&&e()},[k]);let X=(null==k?void 0:k.name)||(null==k?void 0:null===(b=k.data)||void 0===b?void 0:b.queryset_name)||(null==k?void 0:k.id)||"-",I=k?new Date(Number(k.created_at)).toLocaleString():"-",K=null!==(w=null==S?void 0:null===(N=S.result)||void 0===N?void 0:null===(g=N.all)||void 0===g?void 0:null===(j=g.queries)||void 0===j?void 0:j.length)&&void 0!==w?w:"-";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{}),(0,l.jsxs)("div",{className:"bg-white min-h-screen fontDmSans",children:[(0,l.jsx)("div",{className:"bg-violet-50/70 px-6 py-4 flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[#6C47FF] text-base font-medium relative",children:[(0,l.jsx)("span",{className:"text-slate-600 text-xs font-semibold pr-2",children:"Select Run :"}),(0,l.jsxs)("span",{ref:L,className:"text-slate-500 text-xs font-semibold ml-2 flex items-center gap-1 cursor-pointer select-none relative",onClick:()=>M(e=>!e),children:[X,(0,l.jsx)(n.fK4,{size:16}),z&&(0,l.jsx)("div",{ref:D,className:"absolute left-0 top-6 z-10 bg-white border border-gray-200 rounded shadow w-48 max-h-56 overflow-y-auto",children:E.map(e=>{var t;return(0,l.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat((null==k?void 0:k.id)===e.id?"bg-gray-100 font-bold":""),onClick:()=>W(e),children:[(0,l.jsx)("div",{className:"font-medium",children:e.name||(null===(t=e.data)||void 0===t?void 0:t.queryset_name)||e.id}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:new Date(Number(e.created_at)).toLocaleString()})]},e.id)})})]}),(0,l.jsx)("span",{className:"text-slate-500 text-xs font-semibold ml-2 pr-2",children:I}),(0,l.jsxs)("span",{className:"text-slate-500 text-xs font-semibold ml-1",children:[K," Questions"]})]})}),q&&(0,l.jsx)("div",{className:"flex justify-center items-center w-full mt-6",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}),P&&(0,l.jsx)("div",{className:"flex justify-center items-center w-full mt-6",children:(0,l.jsx)("p",{className:"text-red-600",children:P})}),!q&&!P&&S&&(0,l.jsxs)("div",{className:"w-full overflow-x-auto px-6",children:[(0,l.jsxs)("div",{className:"hidden md:grid min-w-[700px] w-full grid-cols-3 gap-0 py-3 border-b border-neutral-200 text-neutral-500 text-xs bg-neutral-100/50 font-semibold",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 px-6",children:["Brand",(0,l.jsx)("span",{className:"text-gray-400",children:(0,l.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:["Mentions",(0,l.jsx)("span",{className:"text-gray-400",children:(0,l.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:["Share of Voice (%)",(0,l.jsx)("span",{className:"text-gray-400",children:(0,l.jsx)(i.H2l,{size:16,className:"text-neutral-500"})})]})]}),(0,l.jsx)("div",{className:"hidden md:grid min-w-[700px] w-full text-xs grid-cols-3",children:V.map((e,t)=>[(0,l.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-900 text-xs font-medium px-6 py-3 ".concat(e.name===G?"font-bold text-[#4F46E5]":""),children:e.name},e.name+t+"-brand"),(0,l.jsx)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-950 text-xs font-normal py-3 ".concat(e.name===G?"font-bold text-[#4F46E5]":""),children:e.queries.length},e.name+t+"-mentions"),(0,l.jsxs)("div",{className:"col-span-1 border-b border-[#E5E7EB] bg-white items-center text-neutral-700 text-xs font-normal py-3 ".concat(e.name===G?"font-bold text-[#4F46E5]":""),children:[Number(e.sov).toFixed(2),"%"]},e.name+t+"-sov")])}),(0,l.jsx)("div",{className:"block md:hidden",children:V.map((e,t)=>(0,l.jsx)("div",{className:"mx-1 my-1 rounded shadow-[0px_1px_2px_-1px_rgba(0,0,0,0.10)] outline-[0.50px] outline-offset-[-0.50px] outline-slate-200 p-4 mb-3 bg-white text-sm ".concat(e.name===G?"border-l-4 border-l-[#4F46E5]":""),children:(0,l.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between min-w-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-gray-500 text-xs",children:"Brand:"}),(0,l.jsx)("div",{className:"text-black font-bold text-base break-words ".concat(e.name===G?"text-[#4F46E5]":""),children:e.name})]}),(0,l.jsxs)("div",{className:"text-gray-500 text-xs mt-2",children:["Mentions: ",e.queries.length]})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between items-end flex-shrink-0",children:[(0,l.jsxs)("div",{className:"text-gray-500 flex flex-col items-end text-xs",children:["Share of Voice:",(0,l.jsxs)("span",{className:"mt-1 text-xs font-medium px-2 py-0.5 rounded ".concat(e.name===G?"bg-[#4F46E5] text-white":"bg-gray-200 text-gray-600"),children:[Number(e.sov).toFixed(2),"%"]})]}),e.name===G&&(0,l.jsx)("div",{className:"text-[#4F46E5] text-xs font-medium mt-2",children:"Your Brand"})]})]})},e.name+t+"-card"))})]}),!q&&!P&&S&&O>1&&(0,l.jsxs)("div",{className:"flex justify-end items-center mt-4 px-6",children:[(0,l.jsx)("button",{className:"ml-2 px-2 py-1 border rounded disabled:opacity-50",onClick:()=>T(e=>Math.max(1,e-1)),disabled:1===R,children:"Prev"}),(0,l.jsxs)("span",{className:"mx-2 text-xs",children:["Page ",R," of ",O]}),(0,l.jsx)("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:()=>T(e=>Math.min(O,e+1)),disabled:R===O,children:"Next"})]})]})]})}},75889:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/competitive-insights",function(){return s(49279)}])},80498:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var l=s(32722),a=s(35712);function n(e,t,s,n){return(0,l._)(e,t),(0,a._)(s,"set"),!function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=s}}(e,s,n),n}},94344:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=(e,t)=>{(0,l.useEffect)(()=>{let s=s=>{!e.some(e=>e.current&&e.current.contains(s.target))&&t(s)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[e,t])}}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,4249,636,6593,8792],()=>t(75889)),_N_E=e.O()}]);