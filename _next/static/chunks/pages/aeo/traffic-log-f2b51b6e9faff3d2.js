(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5570],{12370:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(37876),r=a(14232);let l=(0,a(95551).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var i=a(48963);let n=e=>{var t;let{value:a,onChange:n,className:c}=e,[o,d]=(0,r.useState)(!1),x=[{name:"January",value:"01"},{name:"February",value:"02"},{name:"March",value:"03"},{name:"April",value:"04"},{name:"May",value:"05"},{name:"June",value:"06"},{name:"July",value:"07"},{name:"August",value:"08"},{name:"September",value:"09"},{name:"October",value:"20250"},{name:"November",value:"11"},{name:"December",value:"12"}],m=new Date().getFullYear(),u=Array.from({length:10},(e,t)=>m-5+t),[h,p]=(0,r.useState)((null==a?void 0:a.month)||String(new Date().getMonth())),[g,f]=(0,r.useState)((null==a?void 0:a.year)||m),y=e=>{p(e),n({month:e,year:g})},b=e=>{f(e),n({month:h,year:e})},v=null===(t=x.find(e=>e.value==h))||void 0===t?void 0:t.name,j="".concat(v," ").concat(g);return(0,s.jsxs)("div",{className:"relative ".concat(c),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border border-gray-300 rounded-lg px-3 py-2 bg-white cursor-pointer hover:border-gray-400 transition-colors",onClick:()=>d(!o),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-gray-700",children:j})]}),(0,s.jsx)(i.A,{className:"w-4 h-4 text-gray-500 transition-transform ".concat(o?"rotate-180":"")})]}),o&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),(0,s.jsx)("select",{value:g,onChange:e=>b(parseInt(e.target.value)),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:x.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{y(e.value),d(!1)},className:"px-3 py-2 text-sm rounded transition-colors ".concat(h==String(t)?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:e.name.slice(0,3)},e.value))})]})]})}),o&&(0,s.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})}},21578:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(37876),r=a(14232),l=a(68869),i=a(49325),n=a(94499),c=a(65748),o=a(7623),d=a(19926),x=a(92889),m=a(65259),u=a(43598),h=a(12370),p=a(89099),g=a(91589),f=a(88564),y=a(74562),b=a(31906);let v=[{platform:"ChatGPT",hits:0,traffic:0,pages:20,color:"#FACEE7"},{platform:"Perplexity",hits:0,traffic:0,pages:10,color:"#EEE28E"},{platform:"Claude",hits:0,traffic:0,pages:10,color:"#C1E1C1"},{platform:"Google Bard",hits:0,traffic:0,pages:10,color:"#FFE5B4"},{platform:"Generic AI Browser",hits:0,traffic:0,pages:0,color:"#B0E0E6"},{platform:"GitHub Copilot",hits:0,traffic:0,pages:0,color:"#E0BBE4"},{platform:"Google Bot",hits:0,traffic:0,pages:0,color:"#D8F89C"},{platform:"Bing Bot",hits:0,traffic:0,pages:0,color:"#FFB3AB"}],j=()=>{let[e,t]=(0,r.useState)(""),[a,j]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[C,A]=(0,r.useState)([]),[S,E]=(0,r.useState)("week"),[_,D]=(0,r.useState)({month:String(new Date().getMonth()+1).padStart(2,"0"),year:new Date().getFullYear()}),[B,G]=(0,r.useState)(""),[P,F]=(0,r.useState)("error"),[M,T]=(0,r.useState)(!1),I=(0,p.useRouter)(),L=u.A.current().id,W=(0,r.useCallback)(async()=>{let e="".concat(_.year,"-").concat(_.month),{data:t,error:a}=await m.A.doGet({path:"orgs/".concat(L,"/trafficmon/bot?time_range=").concat(e)});if(a){T(!0),F("error"),G(a.message);return}if(t&&t.items){let e={"bot/chatgpt":"ChatGPT","bot/claude":"Claude","bot/perplexity_ai":"Perplexity","bot/google_bard":"Google Bard","bot/generic_ai_browser":"Generic AI Browser","bot/gitHub_copilot":"GitHub Copilot","bot/googlebot":"Google Bot","bot/bingbot":"Bing Bot"},a=t.items.reduce((e,t)=>e+t.count,0);j(v.map(s=>{let r=t.items.find(t=>e[t.skey]===s.platform);return{...s,hits:r?r.count:0,traffic:r?parseFloat((r.count/a*100).toFixed(2)):0}}))}},[L,_]),z=(0,r.useCallback)(async()=>{let e="".concat(_.year,"-").concat(_.month),{data:t,error:a}=await m.A.doGet({path:"orgs/".concat(L,"/trafficmon/url?time_range=").concat(e,"&limit=8")});if(a){T(!0),F("error"),G(a.message);return}t&&k(e=>{let a=[];return t.items.forEach(e=>{var t,s,r,l,i,n,c,o;a.push({page:e.skey,hits:e.count,chatgpt:null!==(i=null===(t=e.client_count)||void 0===t?void 0:t.chatgpt)&&void 0!==i?i:0,perplexity:null!==(n=null===(s=e.client_count)||void 0===s?void 0:s.perplexity_ai)&&void 0!==n?n:0,claude:null!==(c=null===(r=e.client_count)||void 0===r?void 0:r.claude)&&void 0!==c?c:0,gemini:null!==(o=null===(l=e.client_count)||void 0===l?void 0:l.gemini)&&void 0!==o?o:0})}),a})},[L,_]),K=(0,r.useCallback)(async()=>{let e="".concat(_.year,"-").concat(_.month),{data:t,error:a}=await m.A.doGet({path:"orgs/".concat(L,"/trafficmon/logstats?time_range=").concat(e,"&type=").concat(S)});if(a){T(!0),F("error"),G(a.message);return}t&&A(t.statsData)},[L,_,S]);return(0,r.useEffect)(()=>{W(),z(),K()},[W,z,K]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"m-auto absolute",children:M&&(0,s.jsx)(g.A,{type:P,message:B,onClose:()=>T(!1),autoCloseDelay:2e3})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Traffic Trends"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Daily hits coming from AI search bots crawling your pages"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 md:flex-row ",children:[(0,s.jsxs)("div",{className:"relative bg-white rounded-lg p-1 flex justify-center border-1 border-gray-300",children:[(0,s.jsx)("button",{onClick:()=>E("week"),className:"relative px-4 py-1 rounded-md font-medium transition-all duration-200 ".concat("week"===S?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-800"),children:"Week"}),(0,s.jsx)("button",{onClick:()=>E("day"),className:"relative px-4 py-1 rounded-md font-medium transition-all duration-200 ".concat("day"===S?"bg-blue-500 text-white shadow-md":"text-gray-600 hover:text-gray-800"),children:"Day"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(h.default,{value:_,onChange:D,className:"w-[180px]"})}),(0,s.jsx)("div",{className:"text-xl cursor-pointer",onClick:()=>{y.A.show("Api Key",(0,s.jsx)(b.default,{}))},children:(0,s.jsx)(f.GD,{})})]})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(l.u,{width:"100%",height:"100%",children:(0,s.jsxs)(i.b,{data:C,children:[(0,s.jsx)(n.d,{strokeDasharray:2}),(0,s.jsx)(c.W,{dataKey:"name",axisLine:!1,tickLine:!0,tick:{fontSize:12,fill:"#6B7280"}}),(0,s.jsx)(o.h,{hide:!0}),(0,s.jsx)(d.m,{content:t=>(0,s.jsx)(N,{...t,hoveredLine:e,trafficSources:a,selectedDate:_}),cursor:{stroke:"#E5E7EB",strokeWidth:1},isAnimationActive:!1}),a.map(e=>(0,s.jsx)(x.N,{type:"monotone",dataKey:e.platform,stroke:e.color,strokeWidth:2,dot:{fill:e.color,strokeWidth:0,r:4},activeDot:{r:6,fill:e.color,onMouseEnter:()=>t(e.platform),onMouseLeave:()=>t("")}},e.platform))]})})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Traffic split by source"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Which platforms are users searching from"})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 text-gray-700 font-medium  gap-4 border-b border-gray-100 bg-gray-100",children:[(0,s.jsx)("span",{className:"py-3 px-2",children:"Platform"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"Hits"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"Percentage"})]}),a.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center py-3 border-b border-gray-100",children:[(0,s.jsx)("span",{className:"text-sm text-gray-900 px-2",children:e.platform}),(0,s.jsx)("span",{className:"text-sm text-gray-700 px-2",children:e.hits.toLocaleString()}),(0,s.jsxs)("span",{className:"text-sm text-gray-700 px-2",children:[e.traffic,"%"]})]},t))]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Traffic split by content pages"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Which pages are getting the most traffic"})]}),(0,s.jsx)("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium cursor-pointer",onClick:()=>I.push("/aeo/traffic-log/content"),children:"View more"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-4 items-center border-b border-gray-100 bg-gray-100",children:[(0,s.jsx)("span",{className:"col-span-2 py-3 px-2",children:"Page"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"Hits"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"ChatGPT"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"Perplexity"}),(0,s.jsx)("span",{className:"py-3 px-2",children:"Claude"})]}),w.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-2 items-center py-3 text-sm border-b border-gray-100",children:[(0,s.jsx)("span",{className:"col-span-2 text-gray-900 truncate px-2",children:e.page}),(0,s.jsx)("span",{className:"text-gray-700 px-2",children:e.hits.toLocaleString()}),(0,s.jsx)("span",{className:"text-gray-700 px-2",children:e.chatgpt}),(0,s.jsx)("span",{className:"text-gray-700 px-2",children:e.perplexity}),(0,s.jsx)("span",{className:"text-gray-700 px-2",children:e.claude})]},t))]})]})]})]})]})},N=e=>{let{active:t,payload:a,label:r,hoveredLine:l,trafficSources:i,selectedDate:n}=e;if(t&&a&&a.length>0&&l){let e=i.find(e=>e.platform===l),t=a.find(e=>e.dataKey===l),c=0;for(let e in null==t?void 0:t.payload)"name"!=e&&(c+=t.payload[e]);if(e&&t)return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:e.platform}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:(e=>{if("string"==typeof e&&e.toLowerCase().includes("week"))return e;let t=new Date("".concat(n.year,"-").concat(n.month,"-01")).toLocaleString("default",{month:"long"});return isNaN(Number(e))?String(e):"".concat(t," ").concat(e)})(r)}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"Value"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:t.value})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"Pages"}),(0,s.jsxs)("span",{className:"text-xs font-medium",children:[c?(((null==t?void 0:t.value)||0)/c*100).toFixed(2):0,"%"]})]})]})]})}return null}},31906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(37876),r=a(59884),l=a(45982),i=a(14232),n=a(65259),c=a(43598),o=a(91589);let d=()=>{let[e,t]=(0,i.useState)({}),[a,d]=(0,i.useState)(""),[x,m]=(0,i.useState)("error"),[u,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),f=c.A.current().id,y=(0,i.useCallback)(async()=>{let{data:e,error:a}=await n.A.doGet({path:"orgs/".concat(f,"/api-keys")});if(a){d(a.message),m("error");return}e&&t(e.api_keys[0])},[f]),b=async()=>{let{data:e,error:t}=await n.A.doPost({path:"orgs/".concat(f,"/api-keys")});if(t){d(t.message),m("error");return}await y()},v=async()=>{let{data:a,error:s}=await n.A.doDelete({path:"orgs/".concat(f,"/api-keys/").concat(encodeURIComponent(e.id))});if(s){d(s.message),m("error");return}g(!1),t({}),d(""),await y()};(0,i.useEffect)(()=>{y()},[y]),(0,i.useEffect)(()=>{h(!1)},[p]);let j=async(e,t)=>{try{await navigator.clipboard.writeText(e),m("success"),d("".concat(t," copied to clipboard")),h(!0)}catch(e){console.error("Failed to copy text: ",e),m("error"),d("Failed to copy to clipboard"),h(!0)}};return(0,s.jsxs)("div",{children:[!p&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"m-auto absolute",children:u&&(0,s.jsx)(o.A,{type:x,message:a,onClose:()=>h(!1),autoCloseDelay:2e3})}),a&&"error"===x&&(0,s.jsx)("div",{className:"w-full flex justify-center mt-10 text-red-400",children:(0,s.jsx)("div",{children:a})}),(null==e?void 0:e.id)&&(0,s.jsxs)("div",{className:"py-8 px-2 flex items-end justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col w-3/4",children:[(0,s.jsx)("div",{children:"API Key:"}),(0,s.jsx)("div",{className:"overflow-hidden break-all",children:e.id})]}),(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{j(e.id,"Api Key")},children:(0,s.jsx)(r.zU_,{className:"text-blue-400 mb-2"})}),(0,s.jsx)("div",{onClick:()=>g(!0),children:(0,s.jsx)(l.A,{size:20,className:"cursor-pointer text-red-400 mb-2"})})]}),!(null==e?void 0:e.id)&&!a&&(0,s.jsx)("div",{className:"w-full flex justify-center items-center pt-10",children:(0,s.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-2 bg-[#4F46E4] rounded text-white cursor-pointer",onClick:b,children:"Add API Key"})})]}),p&&(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{children:"Are you sure you want to delete the API key?"}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-1 bg-gray-500 rounded text-white cursor-pointer",onClick:()=>g(!1),children:"Cancle"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"flex items-center gap-[2px] w-fit px-4 py-1 bg-red-400 rounded text-white cursor-pointer",onClick:v,children:"Delete"})})]})]})]})}},45982:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},48963:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},81457:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/traffic-log",function(){return a(21578)}])},91589:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(37876),r=a(14232),l=a(75683);let i={success:"bg-green-100 text-green-800 border-green-300",info:"bg-blue-100 text-blue-800 border-blue-300",error:"bg-red-100 text-red-800 border-red-300"},n=e=>{let{type:t,message:a,className:n="",onClose:c,autoCloseDelay:o=1e3}=e;return(0,r.useEffect)(()=>{if(c){let e=setTimeout(()=>{c()},o);return()=>clearTimeout(e)}},[c,o]),(0,s.jsx)("div",{className:"fixed top-4 left-0 right-0 flex justify-center z-[9999] pointer-events-none",children:(0,s.jsxs)("div",{className:"border rounded px-4 py-3 ".concat(i[t]," ").concat(n," \n                pointer-events-auto w-fit flex justify-between items-center \n                shadow-lg animate-slide-down"),role:"alert",children:[(0,s.jsx)("span",{children:a}),c&&(0,s.jsx)("button",{onClick:c,className:"ml-4 hover:opacity-70 transition-opacity","aria-label":"Close",children:(0,s.jsx)(l.WQq,{size:20})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,4938,8511,7092,6343,636,6593,8792],()=>t(81457)),_N_E=e.O()}]);