(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6709],{7492:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(37876);r(14232);var i=r(69241),s=r(95313);let n={default:"bg-gray-500 hover:bg-gray-600 text-white",white:"bg-white hover:bg-gray-100 text-indigo-700 border border-indigo-700",primary:"bgHardBlue hover:bgHardBlue text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},l=e=>{let{variant:t="default",loading:r=!1,children:l,className:o,loaderIcon:d,...u}=e;return(0,a.jsx)("button",{className:(0,i.A)(" text-xs font-semibold px-4 py-2 rounded-lg transition cursor-pointer flex items-center justify-center gap-2",n[t],o),disabled:r||u.disabled,...u,children:r?d||(0,a.jsx)(s.A,{className:"h-4 w-4 animate-spin"}):l})}},32722:(e,t,r)=>{"use strict";function a(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}r.d(t,{_:()=>a})},35712:(e,t,r)=>{"use strict";function a(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}r.d(t,{_:()=>a})},42059:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(37876),i=r(14232),s=r(89099),n=r(43598);let l=()=>{let e=(0,s.useRouter)(),t=e.asPath,[r,l]=(0,i.useState)(""),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?r:e),d=o.map((r,i)=>{let s=i===o.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(s)return;let r="/".concat(o.slice(0,i+1).join("/"));r!==t&&r!=="/".concat(o[0])&&e.push(r)},children:r.replace(/-/g," ")}),!s&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},i)});return(0,i.useEffect)(()=>{(async()=>{let e=await n.A.currentAeoProject();e&&l(e.name)})()},[]),(0,a.jsx)("div",{children:d})},o=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,a.jsx)(l,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42874:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var a=r(32722),i=r(35712);function s(e,t,r){return(0,a._)(e,t),(0,i._)(r,"get"),r.get?r.get.call(e):r.value}},69241:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=function(){for(var e,t,r=0,a="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,a,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(a=e(t[r]))&&(i&&(i+=" "),i+=a)}else for(a in t)t[a]&&(i&&(i+=" "),i+=a)}return i}(e))&&(a&&(a+=" "),a+=t);return a}},70430:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(37876),i=r(14232),s=r(74562),n=r(65259),l=r(43598),o=r(49034);let d=e=>{let{id:t,args:r,setRefetchQuery:o}=e,[d,x]=(0,i.useState)(!1),[f,h]=(0,i.useState)(null),[g,p]=(0,i.useState)([]),b=e=>{let t=g.find(t=>t.id===e.target.id);t&&(t.value=e.target.value),p(g.map(r=>r.id===e.target.id&&null!=t?t:r))},v=async e=>{e.preventDefault();let r=Object.fromEntries(new FormData(e.target));for(let e in r){let t=r[e].toString().trim();if(!t)return;r[e]=t}x(!0);let a=await n.A.doPost({path:"/orgs/".concat(l.A.current().id,"/querysets/").concat(t),data:{data:{args:r}}});if(a.error){h(a.error.message);return}a.data&&(s.A.hide(),o(e=>!e)),x(!1)},j=(0,i.useCallback)(async()=>{let{data:e,error:t}=await n.A.doGet({path:"/orgs/".concat(l.A.current().id,"/aeo/workflows")});if(t){h("Error fetching workflows"),console.log(t.message);return}e&&p(e.workflows.filter(e=>"qgen"===e.type)[0].args.filter(e=>e.used_for.includes("analysis")).map(e=>({...e,value:r[e.id]})))},[r]);return(0,i.useEffect)(()=>{j()},[j]),(0,a.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:v,children:[(0,a.jsx)("div",{children:g.length>0&&g.map(e=>"textarea"===e.editor?(0,a.jsx)(c,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):"country_dropdown"===e.editor?(0,a.jsx)(m,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):(0,a.jsx)(u,{id:e.id,name:e.name,value:e.value,changeHandler:b,description:e.description,required:e.required},e.id))}),f&&(0,a.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:f}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Update"})]})},u=e=>{let{id:t,name:r,description:s,required:n,value:l}=e,[o,d]=(0,i.useState)(l);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:s}),(0,a.jsx)("input",{type:"text",id:t,name:t,value:o,onChange:e=>d(e.target.value),required:n,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},c=e=>{let{id:t,name:r,description:s,required:n,value:l}=e,[o,d]=(0,i.useState)(l);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:s}),(0,a.jsx)("textarea",{id:t,name:t,required:n,value:o,onChange:e=>d(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},m=e=>{let{id:t,name:r,description:s,required:n,value:l}=e,d=(0,o.oj)(),[u,c]=(0,i.useState)(l);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:s}),(0,a.jsx)("select",{id:t,name:t,required:n,value:u,onChange:e=>c(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(d).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})}},80498:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var a=r(32722),i=r(35712);function s(e,t,r,s){return(0,a._)(e,t),(0,i._)(r,"set"),!function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}(e,r,s),s}},86231:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(37876),i=r(42059),s=r(74562),n=r(70430),l=r(65259),o=r(43598),d=r(14232),u=r(6630),c=r(7492);let m=()=>{let[e,t]=(0,d.useState)(null),[r,m]=(0,d.useState)([]),x=async()=>{var e;let{data:t,error:r}=await l.A.doGet({path:"/orgs/".concat(null===(e=o.A.current())||void 0===e?void 0:e.id,"/querysets")});if(r){console.error("Error fetching projects:",r);return}m(t.querysets.map(e=>({id:e.id,org_id:e.org_id,name:e.name,data:e.data||{}})))},f=e=>{let t=r.find(t=>t.id===e.id);return t?t.data.args:{}},h=async()=>{try{let e=await o.A.checkAndGetAeoProject();if(!e)return s.A.show("Create new project",(0,a.jsx)(u.default,{}),!0,"90%");t(e)}catch(e){console.error("Error fetching current project:",e)}};return(0,d.useEffect)(()=>{h(),x()},[]),(0,d.useEffect)(()=>{e&&o.A.setCurrentAeoProject(e)},[e]),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.A,{children:(0,a.jsx)(c.$,{variant:"primary",onClick:()=>s.A.show("Create new project",(0,a.jsx)(u.default,{}),!1,"90%"),children:"Create New Project"})}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start bg-white p-4 w-full h-[calc(100vh-10rem)] mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:"Manage AEO Projects"}),(0,a.jsxs)("div",{className:"text-md mb-6",children:["Current Project:"," ",(0,a.jsx)("span",{className:"font-semibold text-indigo-700",children:(null==e?void 0:e.name)||"None"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Select a project from the list below to manage it."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:(null==e?void 0:e.id)||"",onChange:e=>{t(r.find(t=>t.id===e.target.value)||null)},className:"border border-gray-300 rounded-md p-2 w-fit focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 outline-none transition-shadow",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a project"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),e&&(0,a.jsx)(c.$,{variant:"primary",onClick:()=>s.A.show("Edit Business Profile",(0,a.jsx)(n.A,{id:e.id,args:f(e)||{},setRefetchQuery:()=>x()})),children:"Edit Project"})]})]})]})}},95313:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(95551).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},96721:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/manage-project",function(){return r(86231)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[9034,4249,636,6593,8792],()=>t(96721)),_N_E=e.O()}]);