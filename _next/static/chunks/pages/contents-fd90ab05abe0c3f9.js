(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1430],{4919:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/contents",function(){return s(49282)}])},49282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(37876),n=s(49459),a=s(65259),l=s(43598),i=s(14232),o=s(89099),c=s(45732),d=s(91589),u=s(95551);let x=(0,u.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),h=(0,u.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),m=(0,u.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),p=e=>{let{currentPage:t,setCurrentPage:s,totalItems:n,itemsPerPage:a,setItemsPerPage:l}=e,[o,c]=(0,i.useState)(!1),d=Math.ceil(n/a),u=e=>{e>=1&&e<=d&&s(e)},p=e=>{l(e),s(1),c(!1)};return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,r.jsxs)("span",{children:["Page ",t," of ",d]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>u(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(x,{size:16})}),(0,r.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(d<=5)for(let s=1;s<=d;s++)e.push((0,r.jsx)("button",{onClick:()=>u(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,r.jsx)("button",{onClick:()=>u(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,d-1);s++)e.push((0,r.jsx)("button",{onClick:()=>u(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));d>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=d-2){d>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(d-3,2);s<=d-1;s++)e.push((0,r.jsx)("button",{onClick:()=>u(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,r.jsx)("button",{onClick:()=>u(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}d>1&&e.push((0,r.jsx)("button",{onClick:()=>u(d),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===d?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:d},d))}return e})()}),(0,r.jsx)("button",{onClick:()=>u(t+1),disabled:t===d,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===d?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(h,{size:16})})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,r.jsxs)("span",{className:"mr-2",children:[a," per page"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>c(!o),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,r.jsx)(m,{size:16})}),o&&(0,r.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,r.jsxs)("button",{onClick:()=>p(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(a===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),o&&(0,r.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>c(!1)})]})},g=()=>{let[e,t]=(0,i.useState)([]),[s,u]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[m,g]=(0,i.useState)("error"),[f,b]=(0,i.useState)(1),[j,y]=(0,i.useState)(5),[w,N]=(0,i.useState)(0),[v,k]=(0,i.useState)(!1),C=(0,o.useRouter)(),{id:A}=C.query,_=async e=>{let t=await a.A.doDelete({path:"/orgs/".concat(l.A.current().id,"/contents/").concat(e)});if(t.error){k(!0),g("error"),h(t.error.message);return}E()},P=async(e,t)=>{if(e.status===t)return;if(!e.id){alert("Content not found");return}let s={id:e.id,slug:e.slug,title:e.title,markdown:e.data.draft_content,action:t},r=await a.A.doPost({path:"/orgs/".concat(l.A.current().id,"/contents/").concat(e.id),data:s});if(r.error){k(!0),g("error"),h(r.error.message);return}E()},E=(0,i.useCallback)(()=>{let e="?limit=".concat(j,"&offset=").concat((f-1)*j),r=s?"&search=".concat(s):"",n=A?"&domain_id=".concat(A):"";return setTimeout(async()=>{let s=await a.A.doGet({path:"/orgs/".concat(l.A.current().id,"/contents").concat(e).concat(n).concat(r)});if(s.error){k(!0),g("error"),h(s.error.message);return}t(s.data.contents),N(s.data.count)},500)},[s,A,f,j]),S=(0,i.useCallback)(async()=>{var e,t;let s=await a.A.doGet({path:"/orgs/".concat(l.A.current().id,"/domains")});if(s.error){k(!0),g("error"),h(s.error.message);return}(null===(t=s.data)||void 0===t?void 0:null===(e=t.domains)||void 0===e?void 0:e.length)||C.push("/domains")},[C]);return(0,i.useEffect)(()=>{let e=E();return S(),()=>clearTimeout(e)},[E,S]),(0,r.jsxs)("div",{className:"w-full h-full p-[16px] flex flex-col",children:[(0,r.jsx)("div",{className:"m-auto absolute",children:v&&(0,r.jsx)(d.A,{type:m,message:x,onClose:()=>k(!1),autoCloseDelay:2e3})}),(0,r.jsxs)("div",{className:"flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"justify-start text-black text-xl font-bold font-['Urbanist']",children:["Contents Page (",w,")"]}),(0,r.jsx)("div",{className:"text-blue-400 cursor-pointer",onClick:()=>C.push("/domains"),children:"Setup Domain"})]}),(0,r.jsxs)("div",{className:"flex justify-between py-[12px]",children:[(0,r.jsx)("div",{className:"flex gap-[12px] items-center",children:(0,r.jsx)("div",{className:"w-1/2",children:(0,r.jsx)("input",{className:"h-[36px] border border-neutral-300 text-gray-600 font-medium bg-white max-w-3xl rounded-lg p-3 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",type:"text",placeholder:"Search page",value:s,onChange:e=>u(e.target.value)})})}),(0,r.jsx)("div",{className:"flex gap-[12px] align-middle",children:(0,r.jsx)("button",{className:" h-8 p-2.5 bg-indigo-600 rounded inline-flex justify-center items-center gap-1 cursor-pointer",onClick:()=>{C.push("/contents/add")},children:(0,r.jsxs)("span",{className:"flex items-center gap-[2px] text-white text-sm font-semibold font-['Urbanist']",children:[(0,r.jsx)(c.jgn,{className:"text-[18px] font-[1000] text-white"})," Content"]})})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden mt-4",children:(0,r.jsx)("div",{className:"w-full h-full overflow-y-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-700 font-medium sticky top-0 z-11",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"w-1/4 text-center py-3 px-2",children:"Page"}),(0,r.jsx)("td",{className:"w-1/4 text-center py-3 px-2",children:"Status"}),(0,r.jsx)("td",{className:"w-1/4 text-center py-3 px-2",children:"Domain"}),(0,r.jsx)("td",{className:"w-1/4 text-center py-3 px-2",children:"Actions"})]})}),(0,r.jsxs)("tbody",{className:"bg-white",children:[e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("td",{className:"w-1/4 text-center py-4 px-2",children:(0,r.jsx)("div",{className:"",title:e.title,children:(0,r.jsx)("span",{className:"",children:e.title||"N/A"})})}),(0,r.jsx)("td",{className:"w-1/4 text-center py-4 px-2",title:(null==e?void 0:e.status)||"N/A",children:(0,r.jsx)("span",{className:"text-slate-500 capitalize",children:(null==e?void 0:e.status)||"N/A"})}),(0,r.jsx)("td",{className:"w-1/4 text-center py-4 px-2",title:e.domain_draft,children:(0,r.jsx)("span",{className:"text-slate-500",children:e.domain_draft})}),(0,r.jsx)("td",{className:"w-1/4 text-center py-4 px-2",children:(0,r.jsx)("div",{className:"w-fit m-auto",children:(0,r.jsxs)(n.A,{children:[(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded cursor-pointer block w-full text-left",onClick:async()=>{await _(e.id)},children:"Delete"}),(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded block w-full text-left\n                                  ".concat("published"===e.status?" cursor-not-allowed":" cursor-pointer"),onClick:()=>{P(e,"publish")},children:"Publish"}),(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded block w-full text-left \n                          ".concat("published"!=e.status?" cursor-not-allowed":" cursor-pointer"),onClick:()=>{P(e,"unpublish")},children:"Un-Publish"}),(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded cursor-pointer block w-full text-left",onClick:()=>{C.push("/contents/edit?id=".concat(e.id))},children:"Edit Content"})]})})})]},e.id)),0===e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"text-center py-8",children:(0,r.jsx)("span",{className:"text-gray-500",children:"No contents found"})})})]})]})})}),(0,r.jsx)("div",{className:"flex-shrink-0 mt-2 ",children:(0,r.jsx)(p,{currentPage:f,setCurrentPage:b,totalItems:w,itemsPerPage:j,setItemsPerPage:y})})]})}},49459:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(37876),n=s(14232),a=s(26478);let l=e=>{let{children:t}=e,[s,l]=(0,n.useState)(!1),i=(0,n.useRef)(null),o=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!s)return;let e=i.current,t=o.current;e&&t&&requestAnimationFrame(()=>{let s=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n={top:s.top,bottom:window.innerHeight-s.bottom,left:s.left,right:window.innerWidth-s.right};Object.assign(t.style,{top:"",bottom:"",left:"",right:""}),n.right>=r.width?(t.style.left="120%",t.style.top="0"):n.left>=r.width&&(t.style.right="120%",t.style.top="0"),n.bottom<=r.height&&(t.style.top="-".concat(r.height-s.height,"px"))})},[s]);let c=n.Children.map(t,e=>n.isValidElement(e)?n.cloneElement(e,{onClick:t=>{"onClick"in e.props&&"function"==typeof e.props.onClick&&e.props.onClick(t),l(!1)}}):e);return(0,n.useEffect)(()=>{let e=e=>{var t,s;(null===(t=i.current)||void 0===t?void 0:t.contains(e.target))||(null===(s=o.current)||void 0===s?void 0:s.contains(e.target))||l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:"inline-block z-10",children:[(0,r.jsx)("button",{ref:i,onClick:e=>{e.stopPropagation(),l(e=>!e)},className:"p-2 rounded bg-gray-100 cursor-pointer",children:(0,r.jsx)(a.Ym0,{})}),s&&(0,r.jsx)("div",{ref:o,className:"absolute min-w-[150px] p-1 bg-white shadow-[0_0_5px_rgba(0,0,0,0.2)] rounded-lg z-50 transition-all",children:c})]})})}},91589:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(37876),n=s(14232),a=s(75683);let l={success:"bg-green-100 text-green-800 border-green-300",info:"bg-blue-100 text-blue-800 border-blue-300",error:"bg-red-100 text-red-800 border-red-300"},i=e=>{let{type:t,message:s,className:i="",onClose:o,autoCloseDelay:c=1e3}=e;return(0,n.useEffect)(()=>{if(o){let e=setTimeout(()=>{o()},c);return()=>clearTimeout(e)}},[o,c]),(0,r.jsx)("div",{className:"fixed top-4 left-0 right-0 flex justify-center z-[9999] pointer-events-none",children:(0,r.jsxs)("div",{className:"border rounded px-4 py-3 ".concat(l[t]," ").concat(i," \n                pointer-events-auto w-fit flex justify-between items-center \n                shadow-lg animate-slide-down"),role:"alert",children:[(0,r.jsx)("span",{children:s}),o&&(0,r.jsx)("button",{onClick:o,className:"ml-4 hover:opacity-70 transition-opacity","aria-label":"Close",children:(0,r.jsx)(a.WQq,{size:20})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,2517,636,6593,8792],()=>t(4919)),_N_E=e.O()}]);