(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4961],{32353:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/contents/edit",function(){return a(75981)}])},75981:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(37876),r=a(65259),s=a(43598),l=a(30136),o=a(89099),i=a(14232),c=a(91589),d=a(75683);let u=()=>{let[e,t]=(0,i.useState)(""),[a,u]=(0,i.useState)(""),[x,f]=(0,i.useState)(""),[m,h]=(0,i.useState)(null),[b,g]=(0,i.useState)({}),[v,p]=(0,i.useState)([]),[j,w]=(0,i.useState)({}),[N,y]=(0,i.useState)(!0),[C,k]=(0,i.useState)(""),[_,S]=(0,i.useState)("error"),[E,A]=(0,i.useState)(!1),T=(0,o.useRouter)(),{id:P}=T.query,q=()=>{O(b.data)&&g(e=>({...e,data:{draft_content:e.data.content||"",content:e.data.content||""}}))},z=(0,i.useCallback)(async()=>{var e;let t=await r.A.doGet({path:"/orgs/".concat(s.A.current().id,"/domains")});p(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.domains)},[]),D=async(t,a)=>{if(null===t)return;if(!b.id){A(!0),S("error"),k("Content not found");return}if(!e){A(!0),S("error"),k("Title is required");return}let n={id:b.id,title:e,slug:x,markdown:a,action:t?"publish":"draft"},l=await r.A.doPost({path:"/orgs/".concat(s.A.current().id,"/contents/").concat(b.id),data:n});if(l.error){A(!0),S("error"),k(l.error.message);return}T.back()},G=(0,i.useCallback)(async()=>{let e=await r.A.doGet({path:"/orgs/".concat(s.A.current().id,"/contents?id=").concat(P)});if(e.error){A(!0),S("error"),k(e.error.message);return}g(e.data.contents[0]),t(e.data.contents[0].title),u(e.data.contents[0].data.draft_content||""),f(e.data.contents[0].slug||""),y(!1)},[P]);(0,i.useEffect)(()=>{G(),z()},[G,z]);let O=e=>{var t,a;return((null==b?void 0:null===(t=b.data)||void 0===t?void 0:t.draft_content)||"")!==((null==b?void 0:null===(a=b.data)||void 0===a?void 0:a.content)||"")};return N?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"p-6 h-full flex flex-col justify-between",children:[E&&(0,n.jsx)(c.A,{type:_,message:C,onClose:()=>A(!1),autoCloseDelay:2e3}),(0,n.jsx)("div",{className:"w-min cursor-pointer text-4xl hover:text-gray-800 mb-4",onClick:()=>T.back(),children:(0,n.jsx)(d.eh5,{})}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"justify-start text-black text-xl font-bold font-['Urbanist']",children:"Edit Contents"}),(0,n.jsxs)("div",{className:"flex justify-end items-center gap-4 text-blue-400",children:[(0,n.jsx)("div",{className:"cursor-pointer",onClick:()=>T.back(),children:"Cancel"}),(0,n.jsx)("div",{className:"".concat(O(b.data)?"cursor-pointer":"text-gray-300 cursor-not-allowed "),onClick:()=>q(),children:"Reset Content"}),(0,n.jsx)("div",{className:"cursor-pointer",onClick:()=>D(!1,b.data.draft_content),children:"Save Draft"}),(0,n.jsx)("div",{className:"".concat(O(b.data)?"cursor-pointer":"text-gray-300 cursor-not-allowed "),onClick:()=>D(!0,b.data.draft_content),children:"Publish"})]})]}),(0,n.jsxs)("div",{className:"w-full flex",children:[(0,n.jsxs)("div",{className:"w-1/2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,n.jsx)("input",{className:"h-[36px] border border-neutral-300 text-gray-600 font-medium bg-white max-w-3xl rounded-lg p-3 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",type:"text",placeholder:"Enter Title",value:e,onChange:e=>t(e.target.value)})]}),(0,n.jsx)("div",{className:"w-1/2",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,n.jsx)("input",{className:"h-[36px] border border-neutral-300 text-gray-600 font-medium bg-white max-w-3xl rounded-lg p-3 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",type:"text",placeholder:"Enter Slug",value:x,onChange:e=>f(e.target.value)})]})})]}),(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsx)("div",{className:"text-neutral-500 font-medium text-base mt-4",children:"Content"}),(0,n.jsx)("div",{className:"mt-1 h-10/12","data-color-mode":"light",children:(0,n.jsx)(l.Ay,{height:"100%",value:b.data.draft_content,onChange:e=>{g(t=>({...t,data:{draft_content:e||"",content:t.data.content||""}}))},textareaProps:{placeholder:"Write your content here..."}})})]})]})}},91589:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(37876),r=a(14232),s=a(75683);let l={success:"bg-green-100 text-green-800 border-green-300",info:"bg-blue-100 text-blue-800 border-blue-300",error:"bg-red-100 text-red-800 border-red-300"},o=e=>{let{type:t,message:a,className:o="",onClose:i,autoCloseDelay:c=1e3}=e;return(0,r.useEffect)(()=>{if(i){let e=setTimeout(()=>{i()},c);return()=>clearTimeout(e)}},[i,c]),(0,n.jsx)("div",{className:"fixed top-4 left-0 right-0 flex justify-center z-[9999] pointer-events-none",children:(0,n.jsxs)("div",{className:"border rounded px-4 py-3 ".concat(l[t]," ").concat(o," \n                pointer-events-auto w-fit flex justify-between items-center \n                shadow-lg animate-slide-down"),role:"alert",children:[(0,n.jsx)("span",{children:a}),i&&(0,n.jsx)("button",{onClick:i,className:"ml-4 hover:opacity-70 transition-opacity","aria-label":"Close",children:(0,n.jsx)(s.WQq,{size:20})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,2930,136,636,6593,8792],()=>t(32353)),_N_E=e.O()}]);